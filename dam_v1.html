
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>dam_v1 &#8212; HydPy 2.0.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="HydPy-H (HBV)" href="HydPy-H.html" />
    <link rel="prev" title="dam" href="dam.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="HydPy-H.html" title="HydPy-H (HBV)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="dam.html" title="dam"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HydPy 2.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modelcollection.html" >Model Collection</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="HydPy-D.html" accesskey="U">HydPy-D</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="dam-v1">
<span id="id1"></span><h1>dam_v1<a class="headerlink" href="#dam-v1" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-hydpy.models.dam_v1"></span><p>Obviously, using the “smoothly applied” parameter <cite>remotedischargesavety</cite>
can be beneficial.  But the proper definition of the values of the
“smoothing parameters” of the dam model might require some experience.
It seems advisable to investigate the functioning of each new
model parameterization on a large number of synthetic and/or measured
drought events.</p>
<p>Integration examples:</p>
<blockquote>
<div><blockquote>
<div><p>The following are performed over a period of 20 days:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="k">import</span> <span class="n">pub</span><span class="p">,</span> <span class="n">Timegrid</span><span class="p">,</span> <span class="n">Timegrids</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pub</span><span class="o">.</span><span class="n">timegrids</span> <span class="o">=</span> <span class="n">Timegrids</span><span class="p">(</span><span class="n">Timegrid</span><span class="p">(</span><span class="s1">&#39;01.01.2000&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="s1">&#39;21.01.2000&#39;</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="s1">&#39;1d&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>The first examples are supposed to demonstrate how drought events at a
cross section far downstream are reduced by the corresponding methods of
the dam model under different configurations.  To show this in a
realistic manner, a relatively complex setting is required.  We will
make use of the <a class="reference internal" href="arma_v1.html#module-hydpy.models.arma_v1" title="hydpy.models.arma_v1"><code class="xref py py-mod docutils literal"><span class="pre">arma_v1</span></code></a> application model.  This
model will be used to route the outflow of the dam to the cross section
under investigation and add some <cite>natural</cite> discharge of the subcatchment
between the dam and the cross section (a picture would be helful).</p>
<p>We define four nodes.  The <cite>input</cite> node is used to define the inflow into
the dam and the <cite>natural</cite> node is used to define the additional discharge
of the subcatchment.  The <cite>output</cite> node receives the (unmodified) outflow
out of dam and the <cite>remote</cite> node receives both the routed outflow of the
dam and the additional discharge of the subcatchment:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="k">import</span> <span class="n">Node</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">natural</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s1">&#39;natural&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remote</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="s1">&#39;remote&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>These nodes are used to connect the following three elements.  There is
one element for handling the <cite>dam</cite> model and there are two elements for
handling different <cite>stream</cite> models.  The model of element <cite>stream1</cite> is
supposed to route the outflow of the dam model with significant delay
and the model of element <cite>stream2</cite> is supposed to directly pass the
discharge of the subcatchment:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy</span> <span class="k">import</span> <span class="n">Element</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dam</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s1">&#39;dam&#39;</span><span class="p">,</span> <span class="n">inlets</span><span class="o">=</span><span class="n">input_</span><span class="p">,</span> <span class="n">outlets</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">receivers</span><span class="o">=</span><span class="n">remote</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream1</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s1">&#39;stream1&#39;</span><span class="p">,</span> <span class="n">inlets</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">outlets</span><span class="o">=</span><span class="n">remote</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream2</span> <span class="o">=</span> <span class="n">Element</span><span class="p">(</span><span class="s1">&#39;stream2&#39;</span><span class="p">,</span> <span class="n">inlets</span><span class="o">=</span><span class="n">natural</span><span class="p">,</span> <span class="n">outlets</span><span class="o">=</span><span class="n">remote</span><span class="p">)</span>
</pre></div>
</div>
<p>Now the models can be prepared.  We begin with the <cite>stream2</cite> model.
By setting the <cite>responses</cite> parameter in the following manner we define
a pure Moving Average model that neither results in translation nor
retention processes:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.core.magictools</span> <span class="k">import</span> <span class="n">prepare_model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models</span> <span class="k">import</span> <span class="n">arma_v1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arma_model</span> <span class="o">=</span> <span class="n">prepare_model</span><span class="p">(</span><span class="n">arma_v1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream2</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">arma_model</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arma_model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span><span class="p">(((),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arma_model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</pre></div>
</div>
<p>The second stream model is also configured as pure Moving Average model
but with a time delay of 1.8 days:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">arma_model</span> <span class="o">=</span> <span class="n">prepare_model</span><span class="p">(</span><span class="n">arma_v1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream1</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">arma_model</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arma_model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span><span class="p">(((),</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arma_model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arma_model</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">logs</span><span class="o">.</span><span class="n">login</span> <span class="o">=</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p>Last but not least, the dam model is initialized and handed over to its
the <cite>dam</cite> element (different sets of parameters will be defined in the
examples below):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.models.dam_v1</span> <span class="k">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parameterstep</span><span class="p">(</span><span class="s1">&#39;1d&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dam</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
<p>To execute the following examples conveniently, a test function object
is prepared:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.core.testtools</span> <span class="k">import</span> <span class="n">IntegrationTest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span> <span class="o">=</span> <span class="n">IntegrationTest</span><span class="p">(</span><span class="n">dam</span><span class="p">,</span>
<span class="gp">... </span>                       <span class="n">inits</span><span class="o">=</span><span class="p">((</span><span class="n">states</span><span class="o">.</span><span class="n">watervolume</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>                              <span class="p">(</span><span class="n">logs</span><span class="o">.</span><span class="n">loggedtotalremotedischarge</span><span class="p">,</span> <span class="mf">1.9</span><span class="p">),</span>
<span class="gp">... </span>                              <span class="p">(</span><span class="n">logs</span><span class="o">.</span><span class="n">loggedoutflow</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>                              <span class="p">(</span><span class="n">stream1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">logs</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">dateformat</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%d</span><span class="s1">.%m.&#39;</span>
</pre></div>
</div>
<p>Next the drought event needs to be defined.  The natural discharge of
the subcatchment decreases constantly for 9 days, than stays at constant
level of 1 m³/s for 4 days, and finally increases constantly again:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">natural</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">series</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>        <span class="mf">1.8</span><span class="p">,</span> <span class="mf">1.7</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span>
<span class="gp">... </span>        <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">,</span> <span class="mf">1.4</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">,</span> <span class="mf">1.7</span><span class="p">,</span> <span class="mf">1.8</span><span class="p">]</span>
</pre></div>
</div>
<p>The inflow into the dam is assumened to remain constant for the whole
simulation period:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">series</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>
</div>
<p>Finally, we can set the parameter values of the dam model.  For the sake
of simplicity, the relationship between water level and volume is assumed
to be linear in the range relevant for the following examples (between
0 to 25 m or 0 to 1e8 m³).  This is approximately true if with the
following configuration of the <cite>watervolume2waterlevel</cite> parameter:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">watervolume2waterlevel</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">weights_input</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">weights_output</span><span class="o">=</span><span class="mf">1e6</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">intercepts_hidden</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">intercepts_output</span><span class="o">=-</span><span class="mf">1e6</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1">#The following plot confirms the linearity of the defined relationship:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">watervolume2waterlevel</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">100.</span><span class="p">)</span>
</pre></div>
</div>
<p>Either close the plot manually or write the following lines:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="k">import</span> <span class="n">pyplot</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pyplot</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>To focus on the drought related algorithms solely we turn of the flood
related processes.  This is accomplished by setting the weights and
intercepts of the <cite>waterlevel2flooddischarge</cite> to zero:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">waterlevel2flooddischarge</span><span class="p">(</span>
<span class="gp">... </span>       <span class="n">weights_input</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">weights_output</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
<span class="gp">... </span>       <span class="n">intercepts_hidden</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">intercepts_output</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">waterlevel2flooddischarge</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pyplot</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>To confirm that the whole scenario is properly aranged, we also turn of
of the drought related methods at first:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nmblogentries</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remotedischargeminimum</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remotedischargesavety</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">neardischargeminimumthreshold</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">neardischargeminimumtolerance</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">waterlevelminimumthreshold</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">waterlevelminimumtolerance</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Also, we have to define the area of the catchment draining into the dam.
The information is required for adjusting the numerical local truncation
error only.  For a catchment area of 86.4 km² the general local truncation
error (in mm per simulation step) is identical with the actually applied
site specific local truncation error (in m³/s):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">catchmentarea</span><span class="p">(</span><span class="mf">86.4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.core.objecttools</span> <span class="k">import</span> <span class="n">round_</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">round_</span><span class="p">(</span><span class="n">solver</span><span class="o">.</span><span class="n">abserrormax</span><span class="o">.</span><span class="n">INIT</span><span class="p">)</span>
<span class="go">0.01</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parameters</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">solver</span><span class="o">.</span><span class="n">abserrormax</span>
<span class="go">abserrormax(0.01)</span>
</pre></div>
</div>
<p>The following table confirms that the dam model does not release any
discharge (row <cite>output</cite> contains zero values only).  Hence the
discharge at the cross section downstream (row <cite>remote</cite>) is identical
with the discharge of the subcatchment (row <cite>natural</cite>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge | outflow | watervolume | input | natural | output | remote |</span>
<span class="go">-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    1.0 |                  nan |                    1.9 |          0.0 |          -1.9 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      0.0864 |   1.0 |     1.8 |    0.0 |    1.8 |</span>
<span class="go">| 02.01. |    1.0 |                  1.8 |                    1.8 |          0.0 |          -1.8 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      0.1728 |   1.0 |     1.7 |    0.0 |    1.7 |</span>
<span class="go">| 03.01. |    1.0 |                  1.7 |                    1.7 |          0.0 |          -1.7 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      0.2592 |   1.0 |     1.6 |    0.0 |    1.6 |</span>
<span class="go">| 04.01. |    1.0 |                  1.6 |                    1.6 |          0.0 |          -1.6 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      0.3456 |   1.0 |     1.5 |    0.0 |    1.5 |</span>
<span class="go">| 05.01. |    1.0 |                  1.5 |                    1.5 |          0.0 |          -1.5 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |       0.432 |   1.0 |     1.4 |    0.0 |    1.4 |</span>
<span class="go">| 06.01. |    1.0 |                  1.4 |                    1.4 |          0.0 |          -1.4 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      0.5184 |   1.0 |     1.3 |    0.0 |    1.3 |</span>
<span class="go">| 07.01. |    1.0 |                  1.3 |                    1.3 |          0.0 |          -1.3 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      0.6048 |   1.0 |     1.2 |    0.0 |    1.2 |</span>
<span class="go">| 08.01. |    1.0 |                  1.2 |                    1.2 |          0.0 |          -1.2 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      0.6912 |   1.0 |     1.1 |    0.0 |    1.1 |</span>
<span class="go">| 09.01. |    1.0 |                  1.1 |                    1.1 |          0.0 |          -1.1 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      0.7776 |   1.0 |     1.0 |    0.0 |    1.0 |</span>
<span class="go">| 10.01. |    1.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |       0.864 |   1.0 |     1.0 |    0.0 |    1.0 |</span>
<span class="go">| 11.01. |    1.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      0.9504 |   1.0 |     1.0 |    0.0 |    1.0 |</span>
<span class="go">| 12.01. |    1.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      1.0368 |   1.0 |     1.0 |    0.0 |    1.0 |</span>
<span class="go">| 13.01. |    1.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      1.1232 |   1.0 |     1.1 |    0.0 |    1.1 |</span>
<span class="go">| 14.01. |    1.0 |                  1.1 |                    1.1 |          0.0 |          -1.1 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      1.2096 |   1.0 |     1.2 |    0.0 |    1.2 |</span>
<span class="go">| 15.01. |    1.0 |                  1.2 |                    1.2 |          0.0 |          -1.2 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |       1.296 |   1.0 |     1.3 |    0.0 |    1.3 |</span>
<span class="go">| 16.01. |    1.0 |                  1.3 |                    1.3 |          0.0 |          -1.3 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      1.3824 |   1.0 |     1.4 |    0.0 |    1.4 |</span>
<span class="go">| 17.01. |    1.0 |                  1.4 |                    1.4 |          0.0 |          -1.4 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      1.4688 |   1.0 |     1.5 |    0.0 |    1.5 |</span>
<span class="go">| 18.01. |    1.0 |                  1.5 |                    1.5 |          0.0 |          -1.5 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      1.5552 |   1.0 |     1.6 |    0.0 |    1.6 |</span>
<span class="go">| 19.01. |    1.0 |                  1.6 |                    1.6 |          0.0 |          -1.6 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |      1.6416 |   1.0 |     1.7 |    0.0 |    1.7 |</span>
<span class="go">| 20.01. |    1.0 |                  1.7 |                    1.7 |          0.0 |          -1.7 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |     0.0 |       1.728 |   1.0 |     1.8 |    0.0 |    1.8 |</span>
</pre></div>
</div>
<p>Note that the first value of sequence <cite>totalremotedischarge</cite> is <cite>nan</cite>.
This is due to a time delay of one simulation step.  <cite>totalremotedischarge</cite>
knows the last value of the remote node, which has not been defined
initially.  Hence, in this and the following examples, the first value
of sequence <cite>totalremotedischarge</cite> can be ignored.</p>
<p>Next the discharge that should not be undercut at the cross section
downstream is set to 1.4 m³/s:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">remotedischargeminimum</span><span class="p">(</span><span class="mf">1.4</span><span class="p">)</span>
</pre></div>
</div>
<p>The dam model decreases the drought but is not very successful in
doing so.  The lowest discharge at the cross section is increased from
1 m³/s to approximately 1.2 m³/s in the beginning of the event, which
is still below the threshold value of 1.4 m³/s.  Furthermore, in the
second half of the event too much discharge is released.  On January 12,
the discharge at the cross section is increased from 1 m³/s to
approximately 1.6 m³/s:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume | input | natural |   output |   remote |</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    1.0 |                  1.8 |                    1.9 |          0.0 |          -0.5 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |      0.0864 |   1.0 |     1.8 |      0.0 |      1.8 |</span>
<span class="go">| 02.01. |    1.0 |                  1.8 |                    1.8 |          0.0 |          -0.4 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |      0.1728 |   1.0 |     1.7 |      0.0 |      1.7 |</span>
<span class="go">| 03.01. |    1.0 |                  1.7 |                    1.7 |          0.0 |          -0.3 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |      0.2592 |   1.0 |     1.6 |      0.0 |      1.6 |</span>
<span class="go">| 04.01. |    1.0 |                  1.6 |                    1.6 |          0.0 |          -0.2 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |      0.3456 |   1.0 |     1.5 |      0.0 |      1.5 |</span>
<span class="go">| 05.01. |    1.0 |                  1.5 |                    1.5 |          0.0 |          -0.1 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |       0.432 |   1.0 |     1.4 |      0.0 |      1.4 |</span>
<span class="go">| 06.01. |    1.0 |                  1.4 |                    1.4 |          0.0 |           0.0 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |      0.5184 |   1.0 |     1.3 |      0.0 |      1.3 |</span>
<span class="go">| 07.01. |    1.0 |                  1.3 |                    1.3 |          0.1 |           0.1 |                   0.1 |             0.1 |             0.1 |           0.1 |            0.0 |      0.1 |     0.59616 |   1.0 |     1.2 |      0.1 |     1.22 |</span>
<span class="go">| 08.01. |    1.0 |                 1.22 |                   1.12 |         0.28 |          0.18 |                  0.28 |            0.28 |            0.28 |          0.28 |            0.0 |     0.28 |    0.658368 |   1.0 |     1.1 |     0.28 |    1.196 |</span>
<span class="go">| 09.01. |    1.0 |                1.196 |                  0.916 |        0.484 |         0.204 |                 0.484 |           0.484 |           0.484 |         0.484 |            0.0 |    0.484 |     0.70295 |   1.0 |     1.0 |    0.484 |   1.2388 |</span>
<span class="go">| 10.01. |    1.0 |               1.2388 |                 0.7548 |       0.6452 |        0.1612 |                0.6452 |          0.6452 |          0.6452 |        0.6452 |            0.0 |   0.6452 |    0.733605 |   1.0 |     1.0 |   0.6452 |  1.41664 |</span>
<span class="go">| 11.01. |    1.0 |              1.41664 |                0.77144 |      0.62856 |      -0.01664 |               0.62856 |         0.62856 |         0.62856 |       0.62856 |            0.0 |  0.62856 |    0.765698 |   1.0 |     1.0 |  0.62856 | 1.556992 |</span>
<span class="go">| 12.01. |    1.0 |             1.556992 |               0.928432 |     0.471568 |     -0.156992 |              0.471568 |        0.471568 |        0.471568 |      0.471568 |            0.0 | 0.471568 |    0.811354 |   1.0 |     1.0 | 0.471568 | 1.587698 |</span>
<span class="go">| 13.01. |    1.0 |             1.587698 |                1.11613 |      0.28387 |     -0.187698 |               0.28387 |         0.28387 |         0.28387 |       0.28387 |            0.0 |  0.28387 |    0.873228 |   1.0 |     1.1 |  0.28387 | 1.598489 |</span>
<span class="go">| 14.01. |    1.0 |             1.598489 |               1.314619 |     0.085381 |     -0.198489 |              0.085381 |        0.085381 |        0.085381 |      0.085381 |            0.0 | 0.085381 |    0.952251 |   1.0 |     1.2 | 0.085381 | 1.534951 |</span>
<span class="go">| 15.01. |    1.0 |             1.534951 |                1.44957 |          0.0 |     -0.134951 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |    1.038651 |   1.0 |     1.3 |      0.0 |  1.46647 |</span>
<span class="go">| 16.01. |    1.0 |              1.46647 |                1.46647 |          0.0 |      -0.06647 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |    1.125051 |   1.0 |     1.4 |      0.0 | 1.454001 |</span>
<span class="go">| 17.01. |    1.0 |             1.454001 |               1.454001 |          0.0 |     -0.054001 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |    1.211451 |   1.0 |     1.5 |      0.0 | 1.508538 |</span>
<span class="go">| 18.01. |    1.0 |             1.508538 |               1.508538 |          0.0 |     -0.108538 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |    1.297851 |   1.0 |     1.6 |      0.0 |      1.6 |</span>
<span class="go">| 19.01. |    1.0 |                  1.6 |                    1.6 |          0.0 |          -0.2 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |    1.384251 |   1.0 |     1.7 |      0.0 |      1.7 |</span>
<span class="go">| 20.01. |    1.0 |                  1.7 |                    1.7 |          0.0 |          -0.3 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |    1.470651 |   1.0 |     1.8 |      0.0 |      1.8 |</span>
</pre></div>
</div>
<p>The qualified success in the example above is due to the time delay
of the information flow from the cross section to the dam and, more
importantly, due to the travel time of the discharge released.
A simple strategy to increase reliability would be to set a higher
value for parameter <cite>remotedischargeminimum</cite>, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">remotedischargeminimum</span><span class="p">(</span><span class="mf">1.6</span><span class="p">)</span>
</pre></div>
</div>
<p>Now there is only a small violation of threshold value on January, 6:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume | input | natural |   output |   remote |</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    1.0 |                  1.8 |                    1.9 |          0.0 |          -0.3 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |      0.0864 |   1.0 |     1.8 |      0.0 |      1.8 |</span>
<span class="go">| 02.01. |    1.0 |                  1.8 |                    1.8 |          0.0 |          -0.2 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |      0.1728 |   1.0 |     1.7 |      0.0 |      1.7 |</span>
<span class="go">| 03.01. |    1.0 |                  1.7 |                    1.7 |          0.0 |          -0.1 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |      0.2592 |   1.0 |     1.6 |      0.0 |      1.6 |</span>
<span class="go">| 04.01. |    1.0 |                  1.6 |                    1.6 |          0.0 |           0.0 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |      0.3456 |   1.0 |     1.5 |      0.0 |      1.5 |</span>
<span class="go">| 05.01. |    1.0 |                  1.5 |                    1.5 |          0.1 |           0.1 |                   0.1 |             0.1 |             0.1 |           0.1 |            0.0 |      0.1 |     0.42336 |   1.0 |     1.4 |      0.1 |     1.42 |</span>
<span class="go">| 06.01. |    1.0 |                 1.42 |                   1.32 |         0.28 |          0.18 |                  0.28 |            0.28 |            0.28 |          0.28 |            0.0 |     0.28 |    0.485568 |   1.0 |     1.3 |     0.28 |    1.396 |</span>
<span class="go">| 07.01. |    1.0 |                1.396 |                  1.116 |        0.484 |         0.204 |                 0.484 |           0.484 |           0.484 |         0.484 |            0.0 |    0.484 |     0.53015 |   1.0 |     1.2 |    0.484 |   1.4388 |</span>
<span class="go">| 08.01. |    1.0 |               1.4388 |                 0.9548 |       0.6452 |        0.1612 |                0.6452 |          0.6452 |          0.6452 |        0.6452 |            0.0 |   0.6452 |    0.560805 |   1.0 |     1.1 |   0.6452 |  1.51664 |</span>
<span class="go">| 09.01. |    1.0 |              1.51664 |                0.87144 |      0.72856 |       0.08336 |               0.72856 |         0.72856 |         0.72856 |       0.72856 |            0.0 |  0.72856 |    0.584258 |   1.0 |     1.0 |  0.72856 | 1.576992 |</span>
<span class="go">| 10.01. |    1.0 |             1.576992 |               0.848432 |     0.751568 |      0.023008 |              0.751568 |        0.751568 |        0.751568 |      0.751568 |            0.0 | 0.751568 |    0.605722 |   1.0 |     1.0 | 0.751568 | 1.683698 |</span>
<span class="go">| 11.01. |    1.0 |             1.683698 |                0.93213 |      0.66787 |     -0.083698 |               0.66787 |         0.66787 |         0.66787 |       0.66787 |            0.0 |  0.66787 |    0.634418 |   1.0 |     1.0 |  0.66787 | 1.717289 |</span>
<span class="go">| 12.01. |    1.0 |             1.717289 |               1.049419 |     0.550581 |     -0.117289 |              0.550581 |        0.550581 |        0.550581 |      0.550581 |            0.0 | 0.550581 |    0.673248 |   1.0 |     1.0 | 0.550581 | 1.675591 |</span>
<span class="go">| 13.01. |    1.0 |             1.675591 |                1.12501 |      0.47499 |     -0.075591 |               0.47499 |         0.47499 |         0.47499 |       0.47499 |            0.0 |  0.47499 |    0.718609 |   1.0 |     1.1 |  0.47499 | 1.690748 |</span>
<span class="go">| 14.01. |    1.0 |             1.690748 |               1.215758 |     0.384242 |     -0.090748 |              0.384242 |        0.384242 |        0.384242 |      0.384242 |            0.0 | 0.384242 |     0.77181 |   1.0 |     1.2 | 0.384242 | 1.698806 |</span>
<span class="go">| 15.01. |    1.0 |             1.698806 |               1.314564 |     0.285436 |     -0.098806 |              0.285436 |        0.285436 |        0.285436 |      0.285436 |            0.0 | 0.285436 |    0.833549 |   1.0 |     1.3 | 0.285436 | 1.708339 |</span>
<span class="go">| 16.01. |    1.0 |             1.708339 |               1.422903 |     0.177097 |     -0.108339 |              0.177097 |        0.177097 |        0.177097 |      0.177097 |            0.0 | 0.177097 |    0.904647 |   1.0 |     1.4 | 0.177097 | 1.712365 |</span>
<span class="go">| 17.01. |    1.0 |             1.712365 |               1.535269 |     0.064731 |     -0.112365 |              0.064731 |        0.064731 |        0.064731 |      0.064731 |            0.0 | 0.064731 |    0.985455 |   1.0 |     1.5 | 0.064731 |  1.70784 |</span>
<span class="go">| 18.01. |    1.0 |              1.70784 |               1.643109 |          0.0 |      -0.10784 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |    1.071855 |   1.0 |     1.6 |      0.0 | 1.707565 |</span>
<span class="go">| 19.01. |    1.0 |             1.707565 |               1.707565 |          0.0 |     -0.107565 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |    1.158255 |   1.0 |     1.7 |      0.0 | 1.737129 |</span>
<span class="go">| 20.01. |    1.0 |             1.737129 |               1.737129 |          0.0 |     -0.137129 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |    1.244655 |   1.0 |     1.8 |      0.0 | 1.806473 |</span>
</pre></div>
</div>
<p>While is is possible to simply increase the value of parameter
<cite>remotedischargeminimum</cite>, it is often advisable to use parameter
‘remotedischargesavety´ instead:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">remotedischargeminimum</span><span class="p">(</span><span class="mf">1.4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remotedischargesavety</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>Under this configuration, the threshold value is exceeded at each
simulation time step.  Additionally, the final storage content of
the dam is about 4 % higher than in the last example, meaning the
available water has been used more efficiently:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume | input | natural |   output |   remote |</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    1.0 |             1.806473 |                    1.9 |          0.0 |          -0.5 |                 0.005 |           0.005 |           0.005 |       0.00375 |            0.0 |  0.00375 |    0.086076 |   1.0 |     1.8 |  0.00375 |  1.80075 |</span>
<span class="go">| 02.01. |    1.0 |              1.80075 |                  1.797 |          0.0 |      -0.40075 |              0.012265 |        0.012265 |        0.012265 |      0.012265 |            0.0 | 0.012265 |    0.171416 |   1.0 |     1.7 | 0.012265 | 1.703953 |</span>
<span class="go">| 03.01. |    1.0 |             1.703953 |               1.691688 |          0.0 |     -0.303953 |              0.028841 |        0.028841 |        0.028841 |      0.028841 |            0.0 | 0.028841 |    0.255324 |   1.0 |     1.6 | 0.028841 | 1.611799 |</span>
<span class="go">| 04.01. |    1.0 |             1.611799 |               1.582958 |          0.0 |     -0.211799 |              0.062468 |        0.062468 |        0.062468 |      0.062468 |            0.0 | 0.062468 |    0.336327 |   1.0 |     1.5 | 0.062468 | 1.528085 |</span>
<span class="go">| 05.01. |    1.0 |             1.528085 |               1.465616 |          0.0 |     -0.128085 |              0.117784 |        0.117784 |        0.117784 |      0.117784 |            0.0 | 0.117784 |    0.412551 |   1.0 |     1.4 | 0.117784 | 1.458423 |</span>
<span class="go">| 06.01. |    1.0 |             1.458423 |               1.340639 |     0.059361 |     -0.058423 |              0.243813 |        0.243813 |        0.243813 |      0.243813 |            0.0 | 0.243813 |    0.477885 |   1.0 |     1.3 | 0.243813 | 1.417501 |</span>
<span class="go">| 07.01. |    1.0 |             1.417501 |               1.173688 |     0.226312 |     -0.017501 |              0.456251 |        0.456251 |        0.456251 |      0.456251 |            0.0 | 0.456251 |    0.524865 |   1.0 |     1.2 | 0.456251 | 1.430358 |</span>
<span class="go">| 08.01. |    1.0 |             1.430358 |               0.974107 |     0.425893 |     -0.030358 |              0.641243 |        0.641243 |        0.641243 |      0.641243 |            0.0 | 0.641243 |    0.555862 |   1.0 |     1.1 | 0.641243 | 1.495671 |</span>
<span class="go">| 09.01. |    1.0 |             1.495671 |               0.854428 |     0.545572 |     -0.095671 |              0.692239 |        0.692239 |        0.692239 |      0.692239 |            0.0 | 0.692239 |    0.582452 |   1.0 |     1.0 | 0.692239 | 1.556202 |</span>
<span class="go">| 10.01. |    1.0 |             1.556202 |               0.863962 |     0.536038 |     -0.156202 |              0.632157 |        0.632157 |        0.632157 |      0.632157 |            0.0 | 0.632157 |    0.614234 |   1.0 |     1.0 | 0.632157 | 1.641325 |</span>
<span class="go">| 11.01. |    1.0 |             1.641325 |               1.009168 |     0.390832 |     -0.241325 |              0.439912 |        0.439912 |        0.439912 |      0.439912 |            0.0 | 0.439912 |    0.662625 |   1.0 |     1.0 | 0.439912 | 1.612641 |</span>
<span class="go">| 12.01. |    1.0 |             1.612641 |               1.172729 |     0.227271 |     -0.212641 |              0.289317 |        0.289317 |        0.289317 |      0.289317 |            0.0 | 0.289317 |    0.724028 |   1.0 |     1.0 | 0.289317 | 1.492699 |</span>
<span class="go">| 13.01. |    1.0 |             1.492699 |               1.203382 |     0.196618 |     -0.092699 |              0.346132 |        0.346132 |        0.346132 |      0.346132 |            0.0 | 0.346132 |    0.780523 |   1.0 |     1.1 | 0.346132 | 1.480143 |</span>
<span class="go">| 14.01. |    1.0 |             1.480143 |                1.13401 |      0.26599 |     -0.080143 |              0.427871 |        0.427871 |        0.427871 |      0.427871 |            0.0 | 0.427871 |    0.829954 |   1.0 |     1.2 | 0.427871 | 1.554814 |</span>
<span class="go">| 15.01. |    1.0 |             1.554814 |               1.126942 |     0.273058 |     -0.154814 |              0.370171 |        0.370171 |        0.370171 |      0.370171 |            0.0 | 0.370171 |    0.884372 |   1.0 |     1.3 | 0.370171 | 1.677954 |</span>
<span class="go">| 16.01. |    1.0 |             1.677954 |               1.307783 |     0.092217 |     -0.277954 |               0.12828 |         0.12828 |         0.12828 |       0.12828 |            0.0 |  0.12828 |    0.959688 |   1.0 |     1.4 |  0.12828 | 1.736699 |</span>
<span class="go">| 17.01. |    1.0 |             1.736699 |               1.608419 |          0.0 |     -0.336699 |              0.021671 |        0.021671 |        0.021671 |      0.021671 |            0.0 | 0.021671 |    1.044216 |   1.0 |     1.5 | 0.021671 | 1.709485 |</span>
<span class="go">| 18.01. |    1.0 |             1.709485 |               1.687814 |          0.0 |     -0.309485 |               0.02749 |         0.02749 |         0.02749 |       0.02749 |            0.0 |  0.02749 |    1.128241 |   1.0 |     1.6 |  0.02749 | 1.689667 |</span>
<span class="go">| 19.01. |    1.0 |             1.689667 |               1.662178 |          0.0 |     -0.289667 |              0.032623 |        0.032623 |        0.032623 |      0.032623 |            0.0 | 0.032623 |    1.211822 |   1.0 |     1.7 | 0.032623 |  1.73685 |</span>
<span class="go">| 20.01. |    1.0 |              1.73685 |               1.704227 |          0.0 |      -0.33685 |              0.021642 |        0.021642 |        0.021642 |      0.021642 |            0.0 | 0.021642 |    1.296352 |   1.0 |     1.8 | 0.021642 | 1.827792 |</span>
</pre></div>
</div>
<p>Building upon the last example, we subsequently increase the complexity
of the model parameterization.  Firstly, we introduce a required minimum
water release of 0.2 m³/s:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">neardischargeminimumthreshold</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
<p>Now there is also a relevant water release before and after the drought
event occurs:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume | input | natural |   output |   remote |</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    1.0 |             1.827792 |                    1.9 |          0.0 |          -0.5 |                 0.005 |             0.2 |             0.2 |      0.191667 |            0.0 | 0.191667 |     0.06984 |   1.0 |     1.8 | 0.191667 | 1.838333 |</span>
<span class="go">| 02.01. |    1.0 |             1.838333 |               1.646667 |          0.0 |     -0.438333 |              0.008746 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.13896 |   1.0 |     1.7 |      0.2 | 1.816667 |</span>
<span class="go">| 03.01. |    1.0 |             1.816667 |               1.616667 |          0.0 |     -0.416667 |              0.010632 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.20808 |   1.0 |     1.6 |      0.2 |   1.7775 |</span>
<span class="go">| 04.01. |    1.0 |               1.7775 |                 1.5775 |          0.0 |       -0.3775 |              0.015099 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |      0.2772 |   1.0 |     1.5 |      0.2 | 1.699167 |</span>
<span class="go">| 05.01. |    1.0 |             1.699167 |               1.499167 |          0.0 |     -0.299167 |               0.03006 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.34632 |   1.0 |     1.4 |      0.2 |      1.6 |</span>
<span class="go">| 06.01. |    1.0 |                  1.6 |                    1.4 |          0.0 |          -0.2 |              0.068641 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.41544 |   1.0 |     1.3 |      0.2 |      1.5 |</span>
<span class="go">| 07.01. |    1.0 |                  1.5 |                    1.3 |          0.1 |          -0.1 |              0.242578 |        0.242578 |        0.242578 |      0.242578 |            0.0 | 0.242578 |    0.480881 |   1.0 |     1.2 | 0.242578 | 1.408516 |</span>
<span class="go">| 08.01. |    1.0 |             1.408516 |               1.165937 |     0.234063 |     -0.008516 |              0.474285 |        0.474285 |        0.474285 |      0.474285 |            0.0 | 0.474285 |    0.526303 |   1.0 |     1.1 | 0.474285 | 1.371888 |</span>
<span class="go">| 09.01. |    1.0 |             1.371888 |               0.897603 |     0.502397 |      0.028112 |              0.784512 |        0.784512 |        0.784512 |      0.784512 |            0.0 | 0.784512 |    0.544921 |   1.0 |     1.0 | 0.784512 |  1.43939 |</span>
<span class="go">| 10.01. |    1.0 |              1.43939 |               0.654878 |     0.745122 |      -0.03939 |               0.95036 |         0.95036 |         0.95036 |       0.95036 |            0.0 |  0.95036 |     0.54921 |   1.0 |     1.0 |  0.95036 |  1.67042 |</span>
<span class="go">| 11.01. |    1.0 |              1.67042 |               0.720061 |     0.679939 |      -0.27042 |               0.71839 |         0.71839 |         0.71839 |       0.71839 |            0.0 |  0.71839 |    0.573541 |   1.0 |     1.0 |  0.71839 | 1.806604 |</span>
<span class="go">| 12.01. |    1.0 |             1.806604 |               1.088214 |     0.311786 |     -0.406604 |              0.323424 |        0.323424 |        0.323424 |      0.323424 |            0.0 | 0.323424 |    0.631997 |   1.0 |     1.0 | 0.323424 |   1.7156 |</span>
<span class="go">| 13.01. |    1.0 |               1.7156 |               1.392176 |     0.007824 |       -0.3156 |               0.03389 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |    0.701117 |   1.0 |     1.1 |      0.2 | 1.579922 |</span>
<span class="go">| 14.01. |    1.0 |             1.579922 |               1.379922 |     0.020078 |     -0.179922 |              0.100394 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |    0.770237 |   1.0 |     1.2 |      0.2 | 1.488866 |</span>
<span class="go">| 15.01. |    1.0 |             1.488866 |               1.288866 |     0.111134 |     -0.088866 |              0.264366 |        0.264366 |        0.264366 |      0.264366 |            0.0 | 0.264366 |    0.833796 |   1.0 |     1.3 | 0.264366 | 1.525216 |</span>
<span class="go">| 16.01. |    1.0 |             1.525216 |               1.260849 |     0.139151 |     -0.125216 |              0.259326 |        0.259326 |        0.259326 |      0.259326 |            0.0 | 0.259326 |     0.89779 |   1.0 |     1.4 | 0.259326 | 1.637612 |</span>
<span class="go">| 17.01. |    1.0 |             1.637612 |               1.378286 |     0.021714 |     -0.237612 |              0.072326 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.96691 |   1.0 |     1.5 |      0.2 |  1.74304 |</span>
<span class="go">| 18.01. |    1.0 |              1.74304 |                1.54304 |          0.0 |      -0.34304 |              0.020494 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     1.03603 |   1.0 |     1.6 |      0.2 | 1.824234 |</span>
<span class="go">| 19.01. |    1.0 |             1.824234 |               1.624234 |          0.0 |     -0.424234 |              0.009932 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     1.10515 |   1.0 |     1.7 |      0.2 | 1.905933 |</span>
<span class="go">| 20.01. |    1.0 |             1.905933 |               1.705933 |          0.0 |     -0.505933 |              0.004737 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     1.17427 |   1.0 |     1.8 |      0.2 |      2.0 |</span>
</pre></div>
</div>
<p>One may have noted that the water release is only 0.19 m³/s instead
of 0.2 m³/s on January 1.  This is due to the low local truncation
error of 1e-2 m³/s in combination with the fact that the simulation
starts with an completely dry dam. To confirm this, the required
numerical accuracy is increased temporarily:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">solver</span><span class="o">.</span><span class="n">abserrormax</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">)</span>
</pre></div>
</div>
<p>Now there is only a tiny deviation left in the last shown digit:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume | input | natural |   output |   remote |</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    1.0 |                  2.0 |                    1.9 |          0.0 |          -0.5 |                 0.005 |             0.2 |             0.2 |      0.199998 |            0.0 | 0.199998 |     0.06912 |   1.0 |     1.8 | 0.199998 |     1.84 |</span>
<span class="go">| 02.01. |    1.0 |                 1.84 |               1.640002 |          0.0 |         -0.44 |              0.008615 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.13824 |   1.0 |     1.7 |      0.2 | 1.819999 |</span>
<span class="go">| 03.01. |    1.0 |             1.819999 |               1.619999 |          0.0 |     -0.419999 |              0.010318 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.20736 |   1.0 |     1.6 |      0.2 | 1.779999 |</span>
<span class="go">| 04.01. |    1.0 |             1.779999 |               1.579999 |          0.0 |     -0.379999 |              0.014766 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.27648 |   1.0 |     1.5 |      0.2 |      1.7 |</span>
<span class="go">| 05.01. |    1.0 |                  1.7 |                    1.5 |          0.0 |          -0.3 |              0.029844 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |      0.3456 |   1.0 |     1.4 |      0.2 |      1.6 |</span>
<span class="go">| 06.01. |    1.0 |                  1.6 |                    1.4 |          0.0 |          -0.2 |              0.068641 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.41472 |   1.0 |     1.3 |      0.2 |      1.5 |</span>
<span class="go">| 07.01. |    1.0 |                  1.5 |                    1.3 |          0.1 |          -0.1 |              0.242578 |        0.242578 |        0.242578 |      0.242578 |            0.0 | 0.242578 |    0.480161 |   1.0 |     1.2 | 0.242578 | 1.408516 |</span>
<span class="go">| 08.01. |    1.0 |             1.408516 |               1.165937 |     0.234063 |     -0.008516 |              0.474285 |        0.474285 |        0.474285 |      0.474285 |            0.0 | 0.474285 |    0.525583 |   1.0 |     1.1 | 0.474285 | 1.371888 |</span>
<span class="go">| 09.01. |    1.0 |             1.371888 |               0.897603 |     0.502397 |      0.028112 |              0.784512 |        0.784512 |        0.784512 |      0.784512 |            0.0 | 0.784512 |    0.544201 |   1.0 |     1.0 | 0.784512 |  1.43939 |</span>
<span class="go">| 10.01. |    1.0 |              1.43939 |               0.654878 |     0.745122 |      -0.03939 |               0.95036 |         0.95036 |         0.95036 |       0.95036 |            0.0 |  0.95036 |     0.54849 |   1.0 |     1.0 |  0.95036 |  1.67042 |</span>
<span class="go">| 11.01. |    1.0 |              1.67042 |               0.720061 |     0.679939 |      -0.27042 |               0.71839 |         0.71839 |         0.71839 |       0.71839 |            0.0 |  0.71839 |    0.572821 |   1.0 |     1.0 |  0.71839 | 1.806604 |</span>
<span class="go">| 12.01. |    1.0 |             1.806604 |               1.088214 |     0.311786 |     -0.406604 |              0.323424 |        0.323424 |        0.323424 |      0.323424 |            0.0 | 0.323424 |    0.631278 |   1.0 |     1.0 | 0.323424 |   1.7156 |</span>
<span class="go">| 13.01. |    1.0 |               1.7156 |               1.392176 |     0.007824 |       -0.3156 |               0.03389 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |    0.700398 |   1.0 |     1.1 |      0.2 | 1.579922 |</span>
<span class="go">| 14.01. |    1.0 |             1.579922 |               1.379922 |     0.020078 |     -0.179922 |              0.100394 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |    0.769518 |   1.0 |     1.2 |      0.2 | 1.488866 |</span>
<span class="go">| 15.01. |    1.0 |             1.488866 |               1.288866 |     0.111134 |     -0.088866 |              0.264366 |        0.264366 |        0.264366 |      0.264366 |            0.0 | 0.264366 |    0.833076 |   1.0 |     1.3 | 0.264366 | 1.525216 |</span>
<span class="go">| 16.01. |    1.0 |             1.525216 |               1.260849 |     0.139151 |     -0.125216 |              0.259326 |        0.259326 |        0.259326 |      0.259326 |            0.0 | 0.259326 |    0.897071 |   1.0 |     1.4 | 0.259326 | 1.637612 |</span>
<span class="go">| 17.01. |    1.0 |             1.637612 |               1.378286 |     0.021714 |     -0.237612 |              0.072326 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |    0.966191 |   1.0 |     1.5 |      0.2 |  1.74304 |</span>
<span class="go">| 18.01. |    1.0 |              1.74304 |                1.54304 |          0.0 |      -0.34304 |              0.020494 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |    1.035311 |   1.0 |     1.6 |      0.2 | 1.824234 |</span>
<span class="go">| 19.01. |    1.0 |             1.824234 |               1.624234 |          0.0 |     -0.424234 |              0.009932 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |    1.104431 |   1.0 |     1.7 |      0.2 | 1.905933 |</span>
<span class="go">| 20.01. |    1.0 |             1.905933 |               1.705933 |          0.0 |     -0.505933 |              0.004737 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |    1.173551 |   1.0 |     1.8 |      0.2 |      2.0 |</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">solver</span><span class="o">.</span><span class="n">abserrormax</span><span class="p">(</span><span class="mf">1e-2</span><span class="p">)</span>
</pre></div>
</div>
<p>To allow for a smooth transition of the water release in periods where
the highest demand switches from <cite>remote</cite> to <cite>near</cite> or the other way
round, one can increase the value of the <cite>neardischargeminimumtolerance</cite>
parameter:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">neardischargeminimumtolerance</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
<p>It is easiest to inspect the functioning the effect of this “smooth
switch” by looking at the results of column <cite>requiredrelease</cite>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume | input | natural |   output |   remote |</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    1.0 |                  2.0 |                    1.9 |          0.0 |          -0.5 |                 0.005 |        0.210526 |        0.210526 |      0.201754 |            0.0 | 0.201754 |    0.068968 |   1.0 |     1.8 | 0.201754 | 1.840351 |</span>
<span class="go">| 02.01. |    1.0 |             1.840351 |               1.638597 |          0.0 |     -0.440351 |              0.008588 |         0.21092 |         0.21092 |       0.21092 |            0.0 |  0.21092 |    0.137145 |   1.0 |     1.7 |  0.21092 | 1.822886 |</span>
<span class="go">| 03.01. |    1.0 |             1.822886 |               1.611966 |          0.0 |     -0.422886 |              0.010053 |        0.211084 |        0.211084 |      0.211084 |            0.0 | 0.211084 |    0.205307 |   1.0 |     1.6 | 0.211084 | 1.787111 |</span>
<span class="go">| 04.01. |    1.0 |             1.787111 |               1.576027 |          0.0 |     -0.387111 |              0.013858 |        0.211523 |        0.211523 |      0.211523 |            0.0 | 0.211523 |    0.273432 |   1.0 |     1.5 | 0.211523 |  1.71019 |</span>
<span class="go">| 05.01. |    1.0 |              1.71019 |               1.498667 |          0.0 |      -0.31019 |              0.027322 |        0.213209 |        0.213209 |      0.213209 |            0.0 | 0.213209 |     0.34141 |   1.0 |     1.4 | 0.213209 | 1.611668 |</span>
<span class="go">| 06.01. |    1.0 |             1.611668 |               1.398459 |     0.001541 |     -0.211668 |              0.064075 |        0.219043 |        0.219043 |      0.219043 |            0.0 | 0.219043 |    0.408885 |   1.0 |     1.3 | 0.219043 | 1.513658 |</span>
<span class="go">| 07.01. |    1.0 |             1.513658 |               1.294615 |     0.105385 |     -0.113658 |              0.235523 |        0.283419 |        0.283419 |      0.283419 |            0.0 | 0.283419 |    0.470798 |   1.0 |     1.2 | 0.283419 | 1.429416 |</span>
<span class="go">| 08.01. |    1.0 |             1.429416 |               1.145997 |     0.254003 |     -0.029416 |              0.470414 |        0.475212 |        0.475212 |      0.475212 |            0.0 | 0.475212 |    0.516139 |   1.0 |     1.1 | 0.475212 | 1.395444 |</span>
<span class="go">| 09.01. |    1.0 |             1.395444 |               0.920232 |     0.479768 |      0.004556 |              0.735001 |        0.735281 |        0.735281 |      0.735281 |            0.0 | 0.735281 |    0.539011 |   1.0 |     1.0 | 0.735281 | 1.444071 |</span>
<span class="go">| 10.01. |    1.0 |             1.444071 |                0.70879 |      0.69121 |     -0.044071 |              0.891263 |        0.891315 |        0.891315 |      0.891315 |            0.0 | 0.891315 |    0.548402 |   1.0 |     1.0 | 0.891315 | 1.643281 |</span>
<span class="go">| 11.01. |    1.0 |             1.643281 |               0.751966 |     0.648034 |     -0.243281 |              0.696325 |        0.696749 |        0.696749 |      0.696749 |            0.0 | 0.696749 |    0.574602 |   1.0 |     1.0 | 0.696749 | 1.763981 |</span>
<span class="go">| 12.01. |    1.0 |             1.763981 |               1.067232 |     0.332768 |     -0.363981 |              0.349797 |        0.366406 |        0.366406 |      0.366406 |            0.0 | 0.366406 |    0.629345 |   1.0 |     1.0 | 0.366406 | 1.692903 |</span>
<span class="go">| 13.01. |    1.0 |             1.692903 |               1.326497 |     0.073503 |     -0.292903 |              0.105231 |        0.228241 |        0.228241 |      0.228241 |            0.0 | 0.228241 |    0.696025 |   1.0 |     1.1 | 0.228241 | 1.590367 |</span>
<span class="go">| 14.01. |    1.0 |             1.590367 |               1.362126 |     0.037874 |     -0.190367 |              0.111928 |        0.230054 |        0.230054 |      0.230054 |            0.0 | 0.230054 |    0.762548 |   1.0 |     1.2 | 0.230054 | 1.516904 |</span>
<span class="go">| 15.01. |    1.0 |             1.516904 |                1.28685 |      0.11315 |     -0.116904 |              0.240436 |        0.286374 |        0.286374 |      0.286374 |            0.0 | 0.286374 |    0.824205 |   1.0 |     1.3 | 0.286374 | 1.554409 |</span>
<span class="go">| 16.01. |    1.0 |             1.554409 |               1.268035 |     0.131965 |     -0.154409 |              0.229369 |        0.279807 |        0.279807 |      0.279807 |            0.0 | 0.279807 |     0.88643 |   1.0 |     1.4 | 0.279807 | 1.662351 |</span>
<span class="go">| 17.01. |    1.0 |             1.662351 |               1.382544 |     0.017456 |     -0.262351 |              0.058622 |         0.21805 |         0.21805 |       0.21805 |            0.0 |  0.21805 |    0.953991 |   1.0 |     1.5 |  0.21805 | 1.764451 |</span>
<span class="go">| 18.01. |    1.0 |             1.764451 |                 1.5464 |          0.0 |     -0.364451 |              0.016958 |        0.211892 |        0.211892 |      0.211892 |            0.0 | 0.211892 |    1.022083 |   1.0 |     1.6 | 0.211892 | 1.842178 |</span>
<span class="go">| 19.01. |    1.0 |             1.842178 |               1.630286 |          0.0 |     -0.442178 |              0.008447 |        0.210904 |        0.210904 |      0.210904 |            0.0 | 0.210904 |    1.090261 |   1.0 |     1.7 | 0.210904 | 1.920334 |</span>
<span class="go">| 20.01. |    1.0 |             1.920334 |               1.709429 |          0.0 |     -0.520334 |              0.004155 |        0.210435 |        0.210435 |      0.210435 |            0.0 | 0.210435 |    1.158479 |   1.0 |     1.8 | 0.210435 | 2.011822 |</span>
</pre></div>
</div>
<p>Version 1 of the dam model that is forced to keep a certain degree
of low flow variability.  It is not allowed to release an arbitrary
amount of water when its inflow falls below the required minimum
water release.  We show this by decreasing the inflow in the
second half of the simulation period to 0.1 m³/s:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">series</span><span class="p">[</span><span class="mi">10</span><span class="p">:]</span> <span class="o">=</span> <span class="mf">0.1</span>
</pre></div>
</div>
<p>The value of parameter <cite>neardischargeminimumthreshold</cite> (0.2 m³/s) is
maintained, but the value of <cite>neardischargeminimumtolerance</cite> is reset
to 0 m³/s for improving comprehensibility:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">neardischargeminimumtolerance</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
<p>As to be expected, the actual release drops to 0.1 m³/s on January 11.
But, due to the time delay of the discharge released earlier, the
largest violation of the threshold value takes place on January, 13:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume | input | natural |   output |   remote |</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    1.0 |             2.011822 |                    1.9 |          0.0 |          -0.5 |                 0.005 |             0.2 |             0.2 |      0.191667 |            0.0 | 0.191667 |     0.06984 |   1.0 |     1.8 | 0.191667 | 1.838333 |</span>
<span class="go">| 02.01. |    1.0 |             1.838333 |               1.646667 |          0.0 |     -0.438333 |              0.008746 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.13896 |   1.0 |     1.7 |      0.2 | 1.816667 |</span>
<span class="go">| 03.01. |    1.0 |             1.816667 |               1.616667 |          0.0 |     -0.416667 |              0.010632 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.20808 |   1.0 |     1.6 |      0.2 |   1.7775 |</span>
<span class="go">| 04.01. |    1.0 |               1.7775 |                 1.5775 |          0.0 |       -0.3775 |              0.015099 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |      0.2772 |   1.0 |     1.5 |      0.2 | 1.699167 |</span>
<span class="go">| 05.01. |    1.0 |             1.699167 |               1.499167 |          0.0 |     -0.299167 |               0.03006 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.34632 |   1.0 |     1.4 |      0.2 |      1.6 |</span>
<span class="go">| 06.01. |    1.0 |                  1.6 |                    1.4 |          0.0 |          -0.2 |              0.068641 |             0.2 |             0.2 |           0.2 |            0.0 |      0.2 |     0.41544 |   1.0 |     1.3 |      0.2 |      1.5 |</span>
<span class="go">| 07.01. |    1.0 |                  1.5 |                    1.3 |          0.1 |          -0.1 |              0.242578 |        0.242578 |        0.242578 |      0.242578 |            0.0 | 0.242578 |    0.480881 |   1.0 |     1.2 | 0.242578 | 1.408516 |</span>
<span class="go">| 08.01. |    1.0 |             1.408516 |               1.165937 |     0.234063 |     -0.008516 |              0.474285 |        0.474285 |        0.474285 |      0.474285 |            0.0 | 0.474285 |    0.526303 |   1.0 |     1.1 | 0.474285 | 1.371888 |</span>
<span class="go">| 09.01. |    1.0 |             1.371888 |               0.897603 |     0.502397 |      0.028112 |              0.784512 |        0.784512 |        0.784512 |      0.784512 |            0.0 | 0.784512 |    0.544921 |   1.0 |     1.0 | 0.784512 |  1.43939 |</span>
<span class="go">| 10.01. |    1.0 |              1.43939 |               0.654878 |     0.745122 |      -0.03939 |               0.95036 |         0.95036 |         0.95036 |       0.95036 |            0.0 |  0.95036 |     0.54921 |   1.0 |     1.0 |  0.95036 |  1.67042 |</span>
<span class="go">| 11.01. |    0.1 |              1.67042 |               0.720061 |     0.679939 |      -0.27042 |               0.71839 |         0.71839 |             0.1 |           0.1 |            0.0 |      0.1 |     0.54921 |   0.1 |     1.0 |      0.1 | 1.682926 |</span>
<span class="go">| 12.01. |    0.1 |             1.682926 |               1.582926 |          0.0 |     -0.282926 |              0.034564 |             0.2 |             0.1 |           0.1 |            0.0 |      0.1 |     0.54921 |   0.1 |     1.0 |      0.1 | 1.423559 |</span>
<span class="go">| 13.01. |    0.1 |             1.423559 |               1.323559 |     0.076441 |     -0.023559 |              0.299482 |        0.299482 |             0.1 |           0.1 |            0.0 |      0.1 |     0.54921 |   0.1 |     1.1 |      0.1 | 1.285036 |</span>
<span class="go">| 14.01. |    0.1 |             1.285036 |               1.185036 |     0.214964 |      0.114964 |              0.585979 |        0.585979 |             0.1 |           0.1 |            0.0 |      0.1 |     0.54921 |   0.1 |     1.2 |      0.1 |      1.3 |</span>
<span class="go">| 15.01. |    0.1 |                  1.3 |                    1.2 |          0.2 |           0.1 |              0.557422 |        0.557422 |             0.1 |           0.1 |            0.0 |      0.1 |     0.54921 |   0.1 |     1.3 |      0.1 |      1.4 |</span>
<span class="go">| 16.01. |    0.1 |                  1.4 |                    1.3 |          0.1 |          -0.0 |                  0.35 |            0.35 |             0.1 |           0.1 |            0.0 |      0.1 |     0.54921 |   0.1 |     1.4 |      0.1 |      1.5 |</span>
<span class="go">| 17.01. |    0.1 |                  1.5 |                    1.4 |          0.0 |          -0.1 |              0.142578 |             0.2 |             0.1 |           0.1 |            0.0 |      0.1 |     0.54921 |   0.1 |     1.5 |      0.1 |      1.6 |</span>
<span class="go">| 18.01. |    0.1 |                  1.6 |                    1.5 |          0.0 |          -0.2 |              0.068641 |             0.2 |             0.1 |           0.1 |            0.0 |      0.1 |     0.54921 |   0.1 |     1.6 |      0.1 |      1.7 |</span>
<span class="go">| 19.01. |    0.1 |                  1.7 |                    1.6 |          0.0 |          -0.3 |              0.029844 |             0.2 |             0.1 |           0.1 |            0.0 |      0.1 |     0.54921 |   0.1 |     1.7 |      0.1 |      1.8 |</span>
<span class="go">| 20.01. |    0.1 |                  1.8 |                    1.7 |          0.0 |          -0.4 |              0.012348 |             0.2 |             0.1 |           0.1 |            0.0 |      0.1 |     0.54921 |   0.1 |     1.8 |      0.1 |      1.9 |</span>
</pre></div>
</div>
<p>Another issue of the dam model relevant for the simulation of drought
events to be discussed is the possible restriction of water release
due to limited storage.  To focus on this, we reset the parameter
<cite>neardischargeminimumthreshold</cite> to 0 m³/s and define smaller inflow
values, which are constantly decreasing from 0.2 m³/s to 0.0 m³/s:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">neardischargeminimumthreshold</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">input_</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">series</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
<p>Now the storage content increases only until January, 5.  Afterwards
the dam begins to run dry.  On January 11, the dam is actually empty.
But there are some fluctuations of the water volume around 0 m³.
The most severe deviation from the correct value of 0 m³ oocurs on
January 12, where the final storage volume is -666 m³:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date |   inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume |    input | natural |   output |   remote |</span>
<span class="go">---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |      0.2 |                  1.9 |                    1.9 |          0.0 |          -0.5 |                 0.005 |           0.005 |           0.005 |       0.00375 |            0.0 |  0.00375 |    0.016956 |      0.2 |     1.8 |  0.00375 |  1.80075 |</span>
<span class="go">| 02.01. | 0.189474 |              1.80075 |                  1.797 |          0.0 |      -0.40075 |              0.012265 |        0.012265 |        0.012265 |      0.012265 |            0.0 | 0.012265 |    0.032267 | 0.189474 |     1.7 | 0.012265 | 1.703953 |</span>
<span class="go">| 03.01. | 0.178947 |             1.703953 |               1.691688 |          0.0 |     -0.303953 |              0.028841 |        0.028841 |        0.028841 |      0.028841 |            0.0 | 0.028841 |    0.045236 | 0.178947 |     1.6 | 0.028841 | 1.611799 |</span>
<span class="go">| 04.01. | 0.168421 |             1.611799 |               1.582958 |          0.0 |     -0.211799 |              0.062468 |        0.062468 |        0.062468 |      0.062468 |            0.0 | 0.062468 |     0.05439 | 0.168421 |     1.5 | 0.062468 | 1.528085 |</span>
<span class="go">| 05.01. | 0.157895 |             1.528085 |               1.465616 |          0.0 |     -0.128085 |              0.117784 |        0.117784 |        0.117784 |      0.117784 |            0.0 | 0.117784 |    0.057856 | 0.157895 |     1.4 | 0.117784 | 1.458423 |</span>
<span class="go">| 06.01. | 0.147368 |             1.458423 |               1.340639 |     0.059361 |     -0.058423 |              0.243813 |        0.243813 |        0.243813 |      0.243813 |            0.0 | 0.243813 |    0.049523 | 0.147368 |     1.3 | 0.243813 | 1.417501 |</span>
<span class="go">| 07.01. | 0.136842 |             1.417501 |               1.173688 |     0.226312 |     -0.017501 |              0.456251 |        0.456251 |        0.456251 |      0.456251 |            0.0 | 0.456251 |    0.021926 | 0.136842 |     1.2 | 0.456251 | 1.430358 |</span>
<span class="go">| 08.01. | 0.126316 |             1.430358 |               0.974107 |     0.425893 |     -0.030358 |              0.641243 |        0.641243 |        0.641243 |      0.382861 |            0.0 | 0.382861 |   -0.000239 | 0.126316 |     1.1 | 0.382861 | 1.443995 |</span>
<span class="go">| 09.01. | 0.115789 |             1.443995 |               1.061134 |     0.338866 |     -0.043995 |              0.539003 |        0.539003 |        0.539003 |       0.11547 |            0.0 |  0.11547 |   -0.000212 | 0.115789 |     1.0 |  0.11547 | 1.337495 |</span>
<span class="go">| 10.01. | 0.105263 |             1.337495 |               1.222025 |     0.177975 |      0.062505 |              0.497868 |        0.497868 |        0.497868 |      0.108362 |            0.0 | 0.108362 |    -0.00048 | 0.105263 |     1.0 | 0.108362 | 1.228344 |</span>
<span class="go">| 11.01. | 0.094737 |             1.228344 |               1.119981 |     0.280019 |      0.171656 |              0.694448 |        0.694448 |        0.694448 |      0.089381 |            0.0 | 0.089381 |   -0.000017 | 0.094737 |     1.0 | 0.089381 | 1.134148 |</span>
<span class="go">| 12.01. | 0.084211 |             1.134148 |               1.044768 |     0.355232 |      0.265852 |              0.815265 |        0.815265 |        0.815265 |      0.091721 |            0.0 | 0.091721 |   -0.000666 | 0.084211 |     1.0 | 0.091721 | 1.098152 |</span>
<span class="go">| 13.01. | 0.073684 |             1.098152 |               1.006431 |     0.393569 |      0.301848 |              0.864198 |        0.864198 |        0.864198 |      0.067904 |            0.0 | 0.067904 |   -0.000166 | 0.073684 |     1.1 | 0.067904 |  1.18792 |</span>
<span class="go">| 14.01. | 0.063158 |              1.18792 |               1.120015 |     0.279985 |       0.21208 |              0.717657 |        0.717657 |        0.717657 |      0.067501 |            0.0 | 0.067501 |   -0.000542 | 0.063158 |     1.2 | 0.067501 | 1.277116 |</span>
<span class="go">| 15.01. | 0.052632 |             1.277116 |               1.209616 |     0.190384 |      0.122884 |              0.568242 |        0.568242 |        0.568242 |      0.046544 |            0.0 | 0.046544 |   -0.000016 | 0.052632 |     1.3 | 0.046544 | 1.365852 |</span>
<span class="go">| 16.01. | 0.042105 |             1.365852 |               1.319309 |     0.080691 |      0.034148 |              0.369601 |        0.369601 |        0.369601 |      0.048083 |            0.0 | 0.048083 |   -0.000532 | 0.042105 |     1.4 | 0.048083 | 1.455275 |</span>
<span class="go">| 17.01. | 0.031579 |             1.455275 |               1.407192 |          0.0 |     -0.055275 |              0.187833 |        0.187833 |        0.187833 |      0.027168 |            0.0 | 0.027168 |   -0.000151 | 0.031579 |     1.5 | 0.027168 |  1.54538 |</span>
<span class="go">| 18.01. | 0.021053 |              1.54538 |               1.518212 |          0.0 |      -0.14538 |              0.104078 |        0.104078 |        0.104078 |      0.021731 |            0.0 | 0.021731 |    -0.00021 | 0.021053 |     1.6 | 0.021731 | 1.634293 |</span>
<span class="go">| 19.01. | 0.010526 |             1.634293 |               1.612561 |          0.0 |     -0.234293 |              0.052016 |        0.052016 |        0.052016 |      0.013004 |            0.0 | 0.013004 |   -0.000424 | 0.010526 |     1.7 | 0.013004 | 1.724252 |</span>
<span class="go">| 20.01. |      0.0 |             1.724252 |               1.711248 |          0.0 |     -0.324252 |               0.02417 |         0.02417 |        0.012085 |           0.0 |            0.0 |      0.0 |   -0.000424 |      0.0 |     1.8 |      0.0 | 1.814438 |</span>
</pre></div>
</div>
<p>This behaviour of the dam model is due to method
<a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.calc_actualrelease_v1" title="hydpy.models.dam.dam_model.calc_actualrelease_v1"><code class="xref py py-func docutils literal"><span class="pre">calc_actualrelease_v1()</span></code></a> beeing
involved in the set of differential equation that are solved
approximately by a numerical integration algorithm.  Theoretically,
we could decrease the local truncation error to decrease this
problem significantly.  But this could result in quite huge
computation times, as the underlying numerical algorithm is not
really able to handle the discontinuous relationship between release
and volume around <cite>neardischargeminimumthreshold</cite>.</p>
<p>One solution would be to define another version of the dam model and
simply implement an alternative balance equation for the calculation of
the actual release (not done yet, but seems to be worth the effort).
When using the version of the dam model discussed here, it is instead
advised to smooth this problematic discontinuity by increasing the
value of parameter <cite>waterlevelminimumtolerance</cite> (which could not be
implemented properly if method
<a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.calc_actualrelease_v1" title="hydpy.models.dam.dam_model.calc_actualrelease_v1"><code class="xref py py-func docutils literal"><span class="pre">calc_actualrelease_v1()</span></code></a> would
apply a simple balance equation):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">waterlevelminimumtolerance</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
<p>If one wants to avoid not only the fluctuation but also the negative
values of the water volume, one should also sligthly increase the
original threshold value, e.g.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">waterlevelminimumthreshold</span><span class="p">(</span><span class="mf">0.005</span><span class="p">)</span>
</pre></div>
</div>
<p>Now water storage is decaying smoothly.  The lowest storage content
of 541 m³ occurs on January 14.  After that date, the dam is refilled
to a certain degree.  This is due the decreasing remote demand. Note
that negative storage values are circumvented in this example, but this
would have not been the case if the low flow period were prolonged:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date |   inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume |    input | natural |   output |   remote |</span>
<span class="go">---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |      0.2 |             1.814438 |                    1.9 |          0.0 |          -0.5 |                 0.005 |           0.005 |           0.005 |      0.001282 |            0.0 | 0.001282 |    0.017169 |      0.2 |     1.8 | 0.001282 | 1.800256 |</span>
<span class="go">| 02.01. | 0.189474 |             1.800256 |               1.798975 |          0.0 |     -0.400256 |               0.01232 |         0.01232 |         0.01232 |      0.007624 |            0.0 | 0.007624 |    0.032881 | 0.189474 |     1.7 | 0.007624 | 1.702037 |</span>
<span class="go">| 03.01. | 0.178947 |             1.702037 |               1.694414 |          0.0 |     -0.302037 |              0.029323 |        0.029323 |        0.029323 |      0.025921 |            0.0 | 0.025921 |    0.046103 | 0.178947 |     1.6 | 0.025921 | 1.608618 |</span>
<span class="go">| 04.01. | 0.168421 |             1.608618 |               1.582697 |          0.0 |     -0.208618 |              0.064084 |        0.064084 |        0.064084 |      0.062022 |            0.0 | 0.062022 |    0.055296 | 0.168421 |     1.5 | 0.062022 | 1.525188 |</span>
<span class="go">| 05.01. | 0.157895 |             1.525188 |               1.463166 |          0.0 |     -0.125188 |              0.120198 |        0.120198 |        0.120198 |      0.118479 |            0.0 | 0.118479 |    0.058701 | 0.157895 |     1.4 | 0.118479 | 1.457043 |</span>
<span class="go">| 06.01. | 0.147368 |             1.457043 |               1.338564 |     0.061436 |     -0.057043 |              0.247367 |        0.247367 |        0.247367 |      0.242243 |            0.0 | 0.242243 |    0.050504 | 0.147368 |     1.3 | 0.242243 | 1.417039 |</span>
<span class="go">| 07.01. | 0.136842 |             1.417039 |               1.174796 |     0.225204 |     -0.017039 |               0.45567 |         0.45567 |         0.45567 |      0.397328 |            0.0 | 0.397328 |    0.027998 | 0.136842 |     1.2 | 0.397328 | 1.418109 |</span>
<span class="go">| 08.01. | 0.126316 |             1.418109 |               1.020781 |     0.379219 |     -0.018109 |              0.608464 |        0.608464 |        0.608464 |      0.290761 |            0.0 | 0.290761 |     0.01379 | 0.126316 |     1.1 | 0.290761 | 1.401604 |</span>
<span class="go">| 09.01. | 0.115789 |             1.401604 |               1.110843 |     0.289157 |     -0.001604 |              0.537314 |        0.537314 |        0.537314 |      0.154283 |            0.0 | 0.154283 |    0.010464 | 0.115789 |     1.0 | 0.154283 | 1.290584 |</span>
<span class="go">| 10.01. | 0.105263 |             1.290584 |               1.136301 |     0.263699 |      0.109416 |              0.629775 |        0.629775 |        0.629775 |      0.138519 |            0.0 | 0.138519 |    0.007591 | 0.105263 |     1.0 | 0.138519 | 1.216378 |</span>
<span class="go">| 11.01. | 0.094737 |             1.216378 |               1.077859 |     0.322141 |      0.183622 |              0.744091 |        0.744091 |        0.744091 |      0.126207 |            0.0 | 0.126207 |    0.004871 | 0.094737 |     1.0 | 0.126207 |  1.15601 |</span>
<span class="go">| 12.01. | 0.084211 |              1.15601 |               1.029803 |     0.370197 |       0.24399 |               0.82219 |         0.82219 |         0.82219 |      0.109723 |            0.0 | 0.109723 |    0.002667 | 0.084211 |     1.0 | 0.109723 | 1.129412 |</span>
<span class="go">| 13.01. | 0.073684 |             1.129412 |               1.019689 |     0.380311 |      0.270588 |              0.841916 |        0.841916 |        0.841916 |      0.092645 |            0.0 | 0.092645 |    0.001029 | 0.073684 |     1.1 | 0.092645 | 1.214132 |</span>
<span class="go">| 14.01. | 0.063158 |             1.214132 |               1.121487 |     0.278513 |      0.185868 |              0.701812 |        0.701812 |        0.701812 |      0.068806 |            0.0 | 0.068806 |    0.000541 | 0.063158 |     1.2 | 0.068806 | 1.296357 |</span>
<span class="go">| 15.01. | 0.052632 |             1.296357 |               1.227551 |     0.172449 |      0.103643 |              0.533258 |        0.533258 |        0.533258 |      0.051779 |            0.0 | 0.051779 |    0.000615 | 0.052632 |     1.3 | 0.051779 | 1.376644 |</span>
<span class="go">| 16.01. | 0.042105 |             1.376644 |               1.324865 |     0.075135 |      0.023356 |              0.351863 |        0.351863 |        0.351863 |      0.035499 |            0.0 | 0.035499 |    0.001185 | 0.042105 |     1.4 | 0.035499 | 1.457718 |</span>
<span class="go">| 17.01. | 0.031579 |             1.457718 |               1.422218 |          0.0 |     -0.057718 |              0.185207 |        0.185207 |        0.185207 |       0.02024 |            0.0 |  0.02024 |    0.002165 | 0.031579 |     1.5 |  0.02024 | 1.540662 |</span>
<span class="go">| 18.01. | 0.021053 |             1.540662 |               1.520422 |          0.0 |     -0.140662 |              0.107697 |        0.107697 |        0.107697 |      0.012785 |            0.0 | 0.012785 |    0.002879 | 0.021053 |     1.6 | 0.012785 | 1.626481 |</span>
<span class="go">| 19.01. | 0.010526 |             1.626481 |               1.613695 |          0.0 |     -0.226481 |              0.055458 |        0.055458 |        0.055458 |      0.006918 |            0.0 | 0.006918 |    0.003191 | 0.010526 |     1.7 | 0.006918 |  1.71612 |</span>
<span class="go">| 20.01. |      0.0 |              1.71612 |               1.709201 |          0.0 |      -0.31612 |              0.025948 |        0.025948 |        0.012974 |      0.001631 |            0.0 | 0.001631 |     0.00305 |      0.0 |     1.8 | 0.001631 | 1.808953 |</span>
</pre></div>
</div>
<p>So the fluctuation seems to be gone, but there is still some
inaccuracy in the results.  Note that the last outflow value is smaller
than the local truncation error.  However, due to the smoothing of
the discontinuous relationship it would now be possible to define
a lower local truncation error without to increase computation times
too much.</p>
<p>The last “drought parameter” we did no not vary so far is
<cite>nmblogentries</cite>.  In the examples above, this parameter was always
set to 1, meaning that each estimate of the <cite>natural</cite> discharge of
the subcatchment was based only on the latest observation.  Using
only the latest observation offers the advantage of quick adjustments
of the control of the dam.  But there is a risk of the estimates being
too uncertain and of a bad timing of water releases during periods of
fast fluctations.</p>
<p>Let us define a series of extreme fluctuations by repeating the the
natural discharge values of 1.5 m³/s and 0.5 m³/s ten times:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">natural</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">series</span> <span class="o">=</span> <span class="mi">10</span><span class="o">*</span><span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
</pre></div>
</div>
<p>Also increase the inflow to 1 m³/s again, to assure that the dam is
actually able to release as much water as has been estimated to be
required:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">series</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>
</div>
<p>Furthermore, assume that there is no relevant routing time between
the outlet of the dam and the cross section downstream:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">stream1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">responses</span><span class="p">(((),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stream1</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</pre></div>
</div>
<p>The exemple is a little artificial, but exemplifies a general problem
that might occur in different forms.  Due to the time delay of the
information flow from the cross section to the dam, much water is
wasted to increase the peak flows, but the violations of the low flow
threshold remain almost unchanged:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume | input | natural |   output |   remote |</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    1.0 |             1.808953 |                    1.9 |          0.0 |          -0.5 |                 0.005 |           0.005 |           0.005 |      0.002727 |            0.0 | 0.002727 |    0.086164 |   1.0 |     1.5 | 0.002727 | 1.502727 |</span>
<span class="go">| 02.01. |    1.0 |             1.502727 |                    1.5 |          0.0 |     -0.102727 |              0.140038 |        0.140038 |        0.140038 |      0.140003 |            0.0 | 0.140003 |    0.160468 |   1.0 |     0.5 | 0.140003 | 0.640003 |</span>
<span class="go">| 03.01. |    1.0 |             0.640003 |                    0.5 |          0.9 |      0.759997 |              1.399537 |        1.399537 |        1.399537 |      1.399534 |            0.0 | 1.399534 |    0.125948 |   1.0 |     1.5 | 1.399534 | 2.899534 |</span>
<span class="go">| 04.01. |    1.0 |             2.899534 |                    1.5 |          0.0 |     -1.499534 |              0.000001 |        0.000001 |        0.000001 |      0.000001 |            0.0 | 0.000001 |    0.212348 |   1.0 |     0.5 | 0.000001 | 0.500001 |</span>
<span class="go">| 05.01. |    1.0 |             0.500001 |                    0.5 |          0.9 |      0.899999 |              1.399872 |        1.399872 |        1.399872 |      1.399872 |            0.0 | 1.399872 |    0.177799 |   1.0 |     1.5 | 1.399872 | 2.899872 |</span>
<span class="go">| 06.01. |    1.0 |             2.899872 |                    1.5 |          0.0 |     -1.499872 |              0.000001 |        0.000001 |        0.000001 |      0.000001 |            0.0 | 0.000001 |    0.264199 |   1.0 |     0.5 | 0.000001 | 0.500001 |</span>
<span class="go">| 07.01. |    1.0 |             0.500001 |                    0.5 |          0.9 |      0.899999 |              1.399872 |        1.399872 |        1.399872 |      1.399872 |            0.0 | 1.399872 |     0.22965 |   1.0 |     1.5 | 1.399872 | 2.899872 |</span>
<span class="go">| 08.01. |    1.0 |             2.899872 |                    1.5 |          0.0 |     -1.499872 |              0.000001 |        0.000001 |        0.000001 |      0.000001 |            0.0 | 0.000001 |     0.31605 |   1.0 |     0.5 | 0.000001 | 0.500001 |</span>
<span class="go">| 09.01. |    1.0 |             0.500001 |                    0.5 |          0.9 |      0.899999 |              1.399872 |        1.399872 |        1.399872 |      1.399872 |            0.0 | 1.399872 |    0.281501 |   1.0 |     1.5 | 1.399872 | 2.899872 |</span>
<span class="go">| 10.01. |    1.0 |             2.899872 |                    1.5 |          0.0 |     -1.499872 |              0.000001 |        0.000001 |        0.000001 |      0.000001 |            0.0 | 0.000001 |    0.367901 |   1.0 |     0.5 | 0.000001 | 0.500001 |</span>
<span class="go">| 11.01. |    1.0 |             0.500001 |                    0.5 |          0.9 |      0.899999 |              1.399872 |        1.399872 |        1.399872 |      1.399872 |            0.0 | 1.399872 |    0.333352 |   1.0 |     1.5 | 1.399872 | 2.899872 |</span>
<span class="go">| 12.01. |    1.0 |             2.899872 |                    1.5 |          0.0 |     -1.499872 |              0.000001 |        0.000001 |        0.000001 |      0.000001 |            0.0 | 0.000001 |    0.419752 |   1.0 |     0.5 | 0.000001 | 0.500001 |</span>
<span class="go">| 13.01. |    1.0 |             0.500001 |                    0.5 |          0.9 |      0.899999 |              1.399872 |        1.399872 |        1.399872 |      1.399872 |            0.0 | 1.399872 |    0.385203 |   1.0 |     1.5 | 1.399872 | 2.899872 |</span>
<span class="go">| 14.01. |    1.0 |             2.899872 |                    1.5 |          0.0 |     -1.499872 |              0.000001 |        0.000001 |        0.000001 |      0.000001 |            0.0 | 0.000001 |    0.471603 |   1.0 |     0.5 | 0.000001 | 0.500001 |</span>
<span class="go">| 15.01. |    1.0 |             0.500001 |                    0.5 |          0.9 |      0.899999 |              1.399872 |        1.399872 |        1.399872 |      1.399872 |            0.0 | 1.399872 |    0.437054 |   1.0 |     1.5 | 1.399872 | 2.899872 |</span>
<span class="go">| 16.01. |    1.0 |             2.899872 |                    1.5 |          0.0 |     -1.499872 |              0.000001 |        0.000001 |        0.000001 |      0.000001 |            0.0 | 0.000001 |    0.523454 |   1.0 |     0.5 | 0.000001 | 0.500001 |</span>
<span class="go">| 17.01. |    1.0 |             0.500001 |                    0.5 |          0.9 |      0.899999 |              1.399872 |        1.399872 |        1.399872 |      1.399872 |            0.0 | 1.399872 |    0.488905 |   1.0 |     1.5 | 1.399872 | 2.899872 |</span>
<span class="go">| 18.01. |    1.0 |             2.899872 |                    1.5 |          0.0 |     -1.499872 |              0.000001 |        0.000001 |        0.000001 |      0.000001 |            0.0 | 0.000001 |    0.575305 |   1.0 |     0.5 | 0.000001 | 0.500001 |</span>
<span class="go">| 19.01. |    1.0 |             0.500001 |                    0.5 |          0.9 |      0.899999 |              1.399872 |        1.399872 |        1.399872 |      1.399872 |            0.0 | 1.399872 |    0.540756 |   1.0 |     1.5 | 1.399872 | 2.899872 |</span>
<span class="go">| 20.01. |    1.0 |             2.899872 |                    1.5 |          0.0 |     -1.499872 |              0.000001 |        0.000001 |        0.000001 |      0.000001 |            0.0 | 0.000001 |    0.627156 |   1.0 |     0.5 | 0.000001 | 0.500001 |</span>
</pre></div>
</div>
<p>It seems advisable to increase the number of observations taken into
account to estimate the natural discharge at the cross section.
For this purpuse, the value of parameter <cite>nmblogentries</cite> is set to
two days:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nmblogentries</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Now the water release is relatively constant.  This does not completely
solve the problems of wasting water during peak flows and the repeated
violation the low flow threshold, but reduces them significantly:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume | input | natural |   output |   remote |</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    1.0 |             0.500001 |                    1.9 |          0.0 |          -0.5 |                 0.005 |           0.005 |           0.005 |      0.002727 |            0.0 | 0.002727 |    0.086164 |   1.0 |     1.5 | 0.002727 | 1.502727 |</span>
<span class="go">| 02.01. |    1.0 |             1.502727 |                    1.7 |          0.0 |     -0.301364 |              0.029495 |        0.029495 |        0.029495 |      0.029487 |            0.0 | 0.029487 |    0.170017 |   1.0 |     0.5 | 0.029487 | 0.529487 |</span>
<span class="go">| 03.01. |    1.0 |             0.529487 |                    1.0 |          0.4 |      0.383893 |              0.885738 |        0.885738 |        0.885738 |      0.885738 |            0.0 | 0.885738 |    0.179889 |   1.0 |     1.5 | 0.885738 | 2.385738 |</span>
<span class="go">| 04.01. |    1.0 |             2.385738 |                    1.0 |          0.4 |     -0.057613 |               0.58532 |         0.58532 |         0.58532 |       0.58532 |            0.0 |  0.58532 |    0.215717 |   1.0 |     0.5 |  0.58532 |  1.08532 |</span>
<span class="go">| 05.01. |    1.0 |              1.08532 |                    1.0 |          0.4 |     -0.335529 |              0.421895 |        0.421895 |        0.421895 |      0.421895 |            0.0 | 0.421895 |    0.265666 |   1.0 |     1.5 | 0.421895 | 1.921895 |</span>
<span class="go">| 06.01. |    1.0 |             1.921895 |                    1.0 |          0.4 |     -0.103607 |              0.539224 |        0.539224 |        0.539224 |      0.539224 |            0.0 | 0.539224 |    0.305477 |   1.0 |     0.5 | 0.539224 | 1.039224 |</span>
<span class="go">| 07.01. |    1.0 |             1.039224 |                    1.0 |          0.4 |     -0.080559 |              0.561463 |        0.561463 |        0.561463 |      0.561463 |            0.0 | 0.561463 |    0.343366 |   1.0 |     1.5 | 0.561463 | 2.061463 |</span>
<span class="go">| 08.01. |    1.0 |             2.061463 |                    1.0 |          0.4 |     -0.150343 |              0.500369 |        0.500369 |        0.500369 |      0.500369 |            0.0 | 0.500369 |    0.386534 |   1.0 |     0.5 | 0.500369 | 1.000369 |</span>
<span class="go">| 09.01. |    1.0 |             1.000369 |                    1.0 |          0.4 |     -0.130916 |              0.515458 |        0.515458 |        0.515458 |      0.515458 |            0.0 | 0.515458 |    0.428399 |   1.0 |     1.5 | 0.515458 | 2.015458 |</span>
<span class="go">| 10.01. |    1.0 |             2.015458 |                    1.0 |          0.4 |     -0.107913 |              0.535283 |        0.535283 |        0.535283 |      0.535283 |            0.0 | 0.535283 |     0.46855 |   1.0 |     0.5 | 0.535283 | 1.035283 |</span>
<span class="go">| 11.01. |    1.0 |             1.035283 |                    1.0 |          0.4 |     -0.125371 |              0.520045 |        0.520045 |        0.520045 |      0.520045 |            0.0 | 0.520045 |    0.510018 |   1.0 |     1.5 | 0.520045 | 2.020045 |</span>
<span class="go">| 12.01. |    1.0 |             2.020045 |                    1.0 |          0.4 |     -0.127664 |              0.518133 |        0.518133 |        0.518133 |      0.518133 |            0.0 | 0.518133 |    0.551652 |   1.0 |     0.5 | 0.518133 | 1.018133 |</span>
<span class="go">| 13.01. |    1.0 |             1.018133 |                    1.0 |          0.4 |     -0.119089 |               0.52539 |         0.52539 |         0.52539 |       0.52539 |            0.0 |  0.52539 |    0.592658 |   1.0 |     1.5 |  0.52539 |  2.02539 |</span>
<span class="go">| 14.01. |    1.0 |              2.02539 |                    1.0 |          0.4 |     -0.121761 |              0.523097 |        0.523097 |        0.523097 |      0.523097 |            0.0 | 0.523097 |    0.633863 |   1.0 |     0.5 | 0.523097 | 1.023097 |</span>
<span class="go">| 15.01. |    1.0 |             1.023097 |                    1.0 |          0.4 |     -0.124244 |              0.520992 |        0.520992 |        0.520992 |      0.520992 |            0.0 | 0.520992 |    0.675249 |   1.0 |     1.5 | 0.520992 | 2.020992 |</span>
<span class="go">| 16.01. |    1.0 |             2.020992 |                    1.0 |          0.4 |     -0.122045 |              0.522855 |        0.522855 |        0.522855 |      0.522855 |            0.0 | 0.522855 |    0.716474 |   1.0 |     0.5 | 0.522855 | 1.022855 |</span>
<span class="go">| 17.01. |    1.0 |             1.022855 |                    1.0 |          0.4 |     -0.121924 |              0.522958 |        0.522958 |        0.522958 |      0.522958 |            0.0 | 0.522958 |     0.75769 |   1.0 |     1.5 | 0.522958 | 2.022958 |</span>
<span class="go">| 18.01. |    1.0 |             2.022958 |                    1.0 |          0.4 |     -0.122907 |              0.522123 |        0.522123 |        0.522123 |      0.522123 |            0.0 | 0.522123 |    0.798979 |   1.0 |     0.5 | 0.522123 | 1.022123 |</span>
<span class="go">| 19.01. |    1.0 |             1.022123 |                    1.0 |          0.4 |      -0.12254 |              0.522434 |        0.522434 |        0.522434 |      0.522434 |            0.0 | 0.522434 |    0.840241 |   1.0 |     1.5 | 0.522434 | 2.022434 |</span>
<span class="go">| 20.01. |    1.0 |             2.022434 |                    1.0 |          0.4 |     -0.122278 |              0.522657 |        0.522657 |        0.522657 |      0.522657 |            0.0 | 0.522657 |    0.881483 |   1.0 |     0.5 | 0.522657 | 1.022657 |</span>
</pre></div>
</div>
<p>Such negative effects due to information delay cannot be circumvented
easily, unless one would solve the differential equations of all models
involved simultaneously.  However, at least for drougth events (with
much slower dynamics than flood events) these delays should normally
be not overly important.</p>
<p>The next examples are supposed to demonstrate that the flood retention
methods are implemented properly.  Hence, all parameters related to low
water calculations are set in a deactivating manner:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nmblogentries</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remotedischargeminimum</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">remotedischargesavety</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">neardischargeminimumthreshold</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">neardischargeminimumtolerance</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">waterlevelminimumthreshold</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">waterlevelminimumtolerance</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
</pre></div>
</div>
<p>To be able to compare the following numerical results of HydPy-Dam with
an analytical solution, we approximate a linear storage retetenion
process.  The relationship between water level and volume has already
been defined to be (approximately) linear in the range of 0 to 1e8 m³
or 0 to 25 m, respectively.  The relationship between flood discharge
and the water level is also approximately linear in this range, with a
discharge value of 62.5 m³/s for a water level 25 m:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">waterlevel2flooddischarge</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">weights_input</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">weights_output</span><span class="o">=</span><span class="mf">1e7</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">intercepts_hidden</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">intercepts_output</span><span class="o">=-</span><span class="mf">1e7</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">waterlevel2flooddischarge</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">)</span>
</pre></div>
</div>
<p>Close the drawn figure:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pyplot</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Hence, for the given simulation step size, the linear storage
coefficient is approximately 0.054 per day.</p>
<p>(Please be careful when defining such extremely large and small parameter
values for <cite>watervolume2waterlevel</cite> and ‘waterlevel2flooddischarge’.
Otherwise you might get into precision loss trouble, causing the
numerical calculations of the dam model to become very slow or the
results to be very inaccurate.  So either use <cite>normal</cite> parameter values
or check the precision of the results of <cite>watervolume2waterlevel</cite> and
‘waterlevel2flooddischarge’ manually before performing the actual
simulation runs.)</p>
<p>Now a flood event needs to be defined:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">input_</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">series</span> <span class="o">=</span> <span class="p">[</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">5.</span><span class="p">,</span> <span class="mf">9.</span><span class="p">,</span> <span class="mf">8.</span><span class="p">,</span> <span class="mf">5.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">,</span> <span class="mf">2.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span>
<span class="gp">... </span>                                <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]</span>
</pre></div>
</div>
<p>For the sake of simplicity, a constant discharge of 1 m³/s of the
subcatchment is assumed:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="o">.</span><span class="n">inits</span><span class="o">.</span><span class="n">loggedtotalremotedischarge</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">natural</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">series</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>
</div>
<p>At first, a low numerical accuracy of 0.01 m³/s is defined, which should
be sufficient for most flood simulations for large dams:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">solver</span><span class="o">.</span><span class="n">abserrormax</span><span class="p">(</span><span class="mf">1e-2</span><span class="p">)</span>
</pre></div>
</div>
<p>When simulating flood events, numerical stability and accuracy and
their relation to computation time should be examined more closely.
We use the number of function calls of the set of differential
equations as an indicator for computation time, and set the
corresponding counter to zero:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numvars</span><span class="o">.</span><span class="n">nmb_calls</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>You can copy can plot this table to see that the dam actually responds
(approximately) like a linear storage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume | input | natural |   output |   remote |</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    0.0 |             1.022657 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |         0.0 |   0.0 |     1.0 |      0.0 |      1.0 |</span>
<span class="go">| 02.01. |    1.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.026514 | 0.026514 |    0.084109 |   1.0 |     1.0 | 0.026514 | 1.026514 |</span>
<span class="go">| 03.01. |    5.0 |             1.026514 |                    1.0 |          0.0 |     -1.026514 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.183744 | 0.183744 |    0.500234 |   5.0 |     1.0 | 0.183744 | 1.183744 |</span>
<span class="go">| 04.01. |    9.0 |             1.183744 |                    1.0 |          0.0 |     -1.183744 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.542983 | 0.542983 |     1.23092 |   9.0 |     1.0 | 0.542983 | 1.542983 |</span>
<span class="go">| 05.01. |    8.0 |             1.542983 |                    1.0 |          0.0 |     -1.542983 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.961039 | 0.961039 |    1.839086 |   8.0 |     1.0 | 0.961039 | 1.961039 |</span>
<span class="go">| 06.01. |    5.0 |             1.961039 |                    1.0 |          0.0 |     -1.961039 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.251523 | 1.251523 |    2.162955 |   5.0 |     1.0 | 1.251523 | 2.251523 |</span>
<span class="go">| 07.01. |    3.0 |             2.251523 |                    1.0 |          0.0 |     -2.251523 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.395546 | 1.395546 |    2.301579 |   3.0 |     1.0 | 1.395546 | 2.395546 |</span>
<span class="go">| 08.01. |    2.0 |             2.395546 |                    1.0 |          0.0 |     -2.395546 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.453375 | 1.453375 |    2.348808 |   2.0 |     1.0 | 1.453375 | 2.453375 |</span>
<span class="go">| 09.01. |    1.0 |             2.453375 |                    1.0 |          0.0 |     -2.453375 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.455596 | 1.455596 |    2.309444 |   1.0 |     1.0 | 1.455596 | 2.455596 |</span>
<span class="go">| 10.01. |    0.0 |             2.455596 |                    1.0 |          0.0 |     -2.455596 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.405132 | 1.405132 |    2.188041 |   0.0 |     1.0 | 1.405132 | 2.405132 |</span>
<span class="go">| 11.01. |    0.0 |             2.405132 |                    1.0 |          0.0 |     -2.405132 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.331267 | 1.331267 |    2.073019 |   0.0 |     1.0 | 1.331267 | 2.331267 |</span>
<span class="go">| 12.01. |    0.0 |             2.331267 |                    1.0 |          0.0 |     -2.331267 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.261285 | 1.261285 |    1.964044 |   0.0 |     1.0 | 1.261285 | 2.261285 |</span>
<span class="go">| 13.01. |    0.0 |             2.261285 |                    1.0 |          0.0 |     -2.261285 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.194981 | 1.194981 |    1.860798 |   0.0 |     1.0 | 1.194981 | 2.194981 |</span>
<span class="go">| 14.01. |    0.0 |             2.194981 |                    1.0 |          0.0 |     -2.194981 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.132163 | 1.132163 |    1.762979 |   0.0 |     1.0 | 1.132163 | 2.132163 |</span>
<span class="go">| 15.01. |    0.0 |             2.132163 |                    1.0 |          0.0 |     -2.132163 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.072647 | 1.072647 |    1.670302 |   0.0 |     1.0 | 1.072647 | 2.072647 |</span>
<span class="go">| 16.01. |    0.0 |             2.072647 |                    1.0 |          0.0 |     -2.072647 |                   0.0 |             0.0 |             0.0 |           0.0 |        1.01626 |  1.01626 |    1.582498 |   0.0 |     1.0 |  1.01626 |  2.01626 |</span>
<span class="go">| 17.01. |    0.0 |              2.01626 |                    1.0 |          0.0 |      -2.01626 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.962837 | 0.962837 |    1.499308 |   0.0 |     1.0 | 0.962837 | 1.962837 |</span>
<span class="go">| 18.01. |    0.0 |             1.962837 |                    1.0 |          0.0 |     -1.962837 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.912222 | 0.912222 |    1.420492 |   0.0 |     1.0 | 0.912222 | 1.912222 |</span>
<span class="go">| 19.01. |    0.0 |             1.912222 |                    1.0 |          0.0 |     -1.912222 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.864268 | 0.864268 |     1.34582 |   0.0 |     1.0 | 0.864268 | 1.864268 |</span>
<span class="go">| 20.01. |    0.0 |             1.864268 |                    1.0 |          0.0 |     -1.864268 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.818835 | 0.818835 |    1.275072 |   0.0 |     1.0 | 0.818835 | 1.818835 |</span>
</pre></div>
</div>
<p>For a more precise evaluation, you can compare the outflow of the dam
with the following results of the linear storage cascade with only
one storage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">hydpy.auxs.iuhtools</span> <span class="k">import</span> <span class="n">LinearStorageCascade</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lsc</span> <span class="o">=</span> <span class="n">LinearStorageCascade</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">0.054</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">round_</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">lsc</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">coefs</span><span class="p">,</span> <span class="n">input_</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">series</span><span class="p">)[:</span><span class="mi">20</span><span class="p">])</span>
<span class="go">0.0, 0.02652, 0.183776, 0.543037, 0.961081, 1.251541, 1.395548, 1.453371, 1.455585, 1.405116, 1.331252, 1.261271, 1.194968, 1.132151, 1.072636, 1.01625, 0.962828, 0.912214, 0.864261, 0.818829</span>
</pre></div>
</div>
<p>The largest difference occurs on January, 1. But this difference of
0.000054 m³/s is way below the required accuracy of 0.01 m³/s.  There
is no guarantee that the actual numerical error will always fall below
the defined tolerance value.  However, if everything works well, we
should at least expect so for the individual simulation time step,
as the actual error should be better as the error estimate by one order.
On the other hand, the accumulation of errors of individual simulation
time steps is not controlled and might sometimes result in an violation
of the defined tolerance value.</p>
<p>To achieve the results discussed above, about 4 calls of the methods
of the dam model were required:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numvars</span><span class="o">.</span><span class="n">nmb_calls</span>
<span class="go">78</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numvars</span><span class="o">.</span><span class="n">nmb_calls</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>If we set the tolerance value to 1e-6 m³/s, the printed table shows
(six decimal places) no deviation from the analytical solution of the
linear storage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">solver</span><span class="o">.</span><span class="n">abserrormax</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume | input | natural |   output |   remote |</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    0.0 |             1.818835 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |         0.0 |   0.0 |     1.0 |      0.0 |      1.0 |</span>
<span class="go">| 02.01. |    1.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |        0.02652 |  0.02652 |    0.084109 |   1.0 |     1.0 |  0.02652 |  1.02652 |</span>
<span class="go">| 03.01. |    5.0 |              1.02652 |                    1.0 |          0.0 |      -1.02652 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.183776 | 0.183776 |     0.50023 |   5.0 |     1.0 | 0.183776 | 1.183776 |</span>
<span class="go">| 04.01. |    9.0 |             1.183776 |                    1.0 |          0.0 |     -1.183776 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.543037 | 0.543037 |    1.230912 |   9.0 |     1.0 | 0.543037 | 1.543037 |</span>
<span class="go">| 05.01. |    8.0 |             1.543037 |                    1.0 |          0.0 |     -1.543037 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.961081 | 0.961081 |    1.839075 |   8.0 |     1.0 | 0.961081 | 1.961081 |</span>
<span class="go">| 06.01. |    5.0 |             1.961081 |                    1.0 |          0.0 |     -1.961081 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.251541 | 1.251541 |    2.162941 |   5.0 |     1.0 | 1.251541 | 2.251541 |</span>
<span class="go">| 07.01. |    3.0 |             2.251541 |                    1.0 |          0.0 |     -2.251541 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.395548 | 1.395548 |    2.301566 |   3.0 |     1.0 | 1.395548 | 2.395548 |</span>
<span class="go">| 08.01. |    2.0 |             2.395548 |                    1.0 |          0.0 |     -2.395548 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.453371 | 1.453371 |    2.348795 |   2.0 |     1.0 | 1.453371 | 2.453371 |</span>
<span class="go">| 09.01. |    1.0 |             2.453371 |                    1.0 |          0.0 |     -2.453371 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.455585 | 1.455585 |    2.309432 |   1.0 |     1.0 | 1.455585 | 2.455585 |</span>
<span class="go">| 10.01. |    0.0 |             2.455585 |                    1.0 |          0.0 |     -2.455585 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.405116 | 1.405116 |     2.18803 |   0.0 |     1.0 | 1.405116 | 2.405116 |</span>
<span class="go">| 11.01. |    0.0 |             2.405116 |                    1.0 |          0.0 |     -2.405116 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.331252 | 1.331252 |     2.07301 |   0.0 |     1.0 | 1.331252 | 2.331252 |</span>
<span class="go">| 12.01. |    0.0 |             2.331252 |                    1.0 |          0.0 |     -2.331252 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.261271 | 1.261271 |    1.964036 |   0.0 |     1.0 | 1.261271 | 2.261271 |</span>
<span class="go">| 13.01. |    0.0 |             2.261271 |                    1.0 |          0.0 |     -2.261271 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.194968 | 1.194968 |    1.860791 |   0.0 |     1.0 | 1.194968 | 2.194968 |</span>
<span class="go">| 14.01. |    0.0 |             2.194968 |                    1.0 |          0.0 |     -2.194968 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.132151 | 1.132151 |    1.762973 |   0.0 |     1.0 | 1.132151 | 2.132151 |</span>
<span class="go">| 15.01. |    0.0 |             2.132151 |                    1.0 |          0.0 |     -2.132151 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.072636 | 1.072636 |    1.670297 |   0.0 |     1.0 | 1.072636 | 2.072636 |</span>
<span class="go">| 16.01. |    0.0 |             2.072636 |                    1.0 |          0.0 |     -2.072636 |                   0.0 |             0.0 |             0.0 |           0.0 |        1.01625 |  1.01625 |    1.582493 |   0.0 |     1.0 |  1.01625 |  2.01625 |</span>
<span class="go">| 17.01. |    0.0 |              2.01625 |                    1.0 |          0.0 |      -2.01625 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.962828 | 0.962828 |    1.499305 |   0.0 |     1.0 | 0.962828 | 1.962828 |</span>
<span class="go">| 18.01. |    0.0 |             1.962828 |                    1.0 |          0.0 |     -1.962828 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.912214 | 0.912214 |     1.42049 |   0.0 |     1.0 | 0.912214 | 1.912214 |</span>
<span class="go">| 19.01. |    0.0 |             1.912214 |                    1.0 |          0.0 |     -1.912214 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.864261 | 0.864261 |    1.345818 |   0.0 |     1.0 | 0.864261 | 1.864261 |</span>
<span class="go">| 20.01. |    0.0 |             1.864261 |                    1.0 |          0.0 |     -1.864261 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.818829 | 0.818829 |    1.275071 |   0.0 |     1.0 | 0.818829 | 1.818829 |</span>
</pre></div>
</div>
<p>However, this improvement in accuracy increases the computation time
significantly.  Now 10.5 calls were required on average:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numvars</span><span class="o">.</span><span class="n">nmb_calls</span>
<span class="go">211</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numvars</span><span class="o">.</span><span class="n">nmb_calls</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Now we reset the local error tolerance to the more realistic value.
But we configure the <cite>waterlevel2flooddischarge</cite> parameter in a
highly reactive manner:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">solver</span><span class="o">.</span><span class="n">abserrormax</span><span class="p">(</span><span class="mf">1e-2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">waterlevel2flooddischarge</span><span class="p">(</span>
<span class="gp">... </span>        <span class="n">weights_input</span><span class="o">=</span><span class="mf">1e-4</span><span class="p">,</span> <span class="n">weights_output</span><span class="o">=</span><span class="mf">1e7</span><span class="p">,</span>
<span class="gp">... </span>        <span class="n">intercepts_hidden</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">intercepts_output</span><span class="o">=-</span><span class="mf">1e7</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">waterlevel2flooddischarge</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">25.0</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Close the drawn figure:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pyplot</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>With this new parameterization of the dam model, the linear storage
coefficient is approximately 5.4 per day.  This is why the following
test results show virtually no retention effects:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">test</span><span class="p">()</span>
<span class="go">|   date | inflow | totalremotedischarge | naturalremotedischarge | remotedemand | remotefailure | requiredremoterelease | requiredrelease | targetedrelease | actualrelease | flooddischarge |  outflow | watervolume | input | natural |   output |   remote |</span>
<span class="go">----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="go">| 01.01. |    0.0 |             1.818829 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |            0.0 |      0.0 |         0.0 |   0.0 |     1.0 |      0.0 |      1.0 |</span>
<span class="go">| 02.01. |    1.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.818699 | 0.818699 |    0.015664 |   1.0 |     1.0 | 0.818699 | 1.818699 |</span>
<span class="go">| 03.01. |    5.0 |             1.818699 |                    1.0 |          0.0 |     -1.818699 |                   0.0 |             0.0 |             0.0 |           0.0 |        4.25814 |  4.25814 |    0.079761 |   5.0 |     1.0 |  4.25814 |  5.25814 |</span>
<span class="go">| 04.01. |    9.0 |              5.25814 |                    1.0 |          0.0 |      -5.25814 |                   0.0 |             0.0 |             0.0 |           0.0 |       8.259255 | 8.259255 |    0.143761 |   9.0 |     1.0 | 8.259255 | 9.259255 |</span>
<span class="go">| 05.01. |    8.0 |             9.259255 |                    1.0 |          0.0 |     -9.259255 |                   0.0 |             0.0 |             0.0 |           0.0 |       8.178598 | 8.178598 |    0.128331 |   8.0 |     1.0 | 8.178598 | 9.178598 |</span>
<span class="go">| 06.01. |    5.0 |             9.178598 |                    1.0 |          0.0 |     -9.178598 |                   0.0 |             0.0 |             0.0 |           0.0 |       5.555424 | 5.555424 |    0.080342 |   5.0 |     1.0 | 5.555424 | 6.555424 |</span>
<span class="go">| 07.01. |    3.0 |             6.555424 |                    1.0 |          0.0 |     -6.555424 |                   0.0 |             0.0 |             0.0 |           0.0 |       3.371696 | 3.371696 |    0.048227 |   3.0 |     1.0 | 3.371696 | 4.371696 |</span>
<span class="go">| 08.01. |    2.0 |             4.371696 |                    1.0 |          0.0 |     -4.371696 |                   0.0 |             0.0 |             0.0 |           0.0 |       2.183878 | 2.183878 |     0.03234 |   2.0 |     1.0 | 2.183878 | 3.183878 |</span>
<span class="go">| 09.01. |    1.0 |             3.183878 |                    1.0 |          0.0 |     -3.183878 |                   0.0 |             0.0 |             0.0 |           0.0 |       1.185158 | 1.185158 |    0.016343 |   1.0 |     1.0 | 1.185158 | 2.185158 |</span>
<span class="go">| 10.01. |    0.0 |             2.185158 |                    1.0 |          0.0 |     -2.185158 |                   0.0 |             0.0 |             0.0 |           0.0 |       0.187346 | 0.188656 |    0.000043 |   0.0 |     1.0 | 0.188656 | 1.188656 |</span>
<span class="go">| 11.01. |    0.0 |             1.188656 |                    1.0 |          0.0 |     -1.188656 |                   0.0 |             0.0 |             0.0 |           0.0 |       -0.00455 | 0.001338 |   -0.000073 |   0.0 |     1.0 | 0.001338 | 1.001338 |</span>
<span class="go">| 12.01. |    0.0 |             1.001338 |                    1.0 |          0.0 |     -1.001338 |                   0.0 |             0.0 |             0.0 |           0.0 |       -0.00455 |      0.0 |   -0.000073 |   0.0 |     1.0 |      0.0 |      1.0 |</span>
<span class="go">| 13.01. |    0.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |       -0.00455 |      0.0 |   -0.000073 |   0.0 |     1.0 |      0.0 |      1.0 |</span>
<span class="go">| 14.01. |    0.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |       -0.00455 |      0.0 |   -0.000073 |   0.0 |     1.0 |      0.0 |      1.0 |</span>
<span class="go">| 15.01. |    0.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |       -0.00455 |      0.0 |   -0.000073 |   0.0 |     1.0 |      0.0 |      1.0 |</span>
<span class="go">| 16.01. |    0.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |       -0.00455 |      0.0 |   -0.000073 |   0.0 |     1.0 |      0.0 |      1.0 |</span>
<span class="go">| 17.01. |    0.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |       -0.00455 |      0.0 |   -0.000073 |   0.0 |     1.0 |      0.0 |      1.0 |</span>
<span class="go">| 18.01. |    0.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |       -0.00455 |      0.0 |   -0.000073 |   0.0 |     1.0 |      0.0 |      1.0 |</span>
<span class="go">| 19.01. |    0.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |       -0.00455 |      0.0 |   -0.000073 |   0.0 |     1.0 |      0.0 |      1.0 |</span>
<span class="go">| 20.01. |    0.0 |                  1.0 |                    1.0 |          0.0 |          -1.0 |                   0.0 |             0.0 |             0.0 |           0.0 |       -0.00455 |      0.0 |   -0.000073 |   0.0 |     1.0 |      0.0 |      1.0 |</span>
</pre></div>
</div>
<p>The following calculations show that the dam model reaches the required
numerical for this extreme parameterizations:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lsc</span><span class="o">.</span><span class="n">k</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="mf">5.4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">round_</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">lsc</span><span class="o">.</span><span class="n">ma</span><span class="o">.</span><span class="n">coefs</span><span class="p">,</span> <span class="n">input_</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">series</span><span class="p">)[:</span><span class="mi">20</span><span class="p">])</span>
<span class="go">0.0, 0.815651, 4.261772, 8.259271, 8.181003, 5.553864, 3.371199, 2.186025, 1.185189, 0.185185, 0.000836, 0.000004, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0</span>
</pre></div>
</div>
<p>However, due to the potential stiffness of this parameterization, the
division of the different simulation steps into some substeps were
required.  This increased the average required number of model methods
calls to 19 per simulation step:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numvars</span><span class="o">.</span><span class="n">nmb_calls</span>
<span class="go">358</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numvars</span><span class="o">.</span><span class="n">nmb_calls</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Also note that the final water volume is negative due the limited
numerical accuracy of the results.</p>
<p>For common (realistic) simulations of dam retention processes, the
stability issue disussed here should not be of big relevance.
But one should keep it in mind when playing around with parameters
e.g. during model calibration.  Otherwise unexpectedly long simulation
durations might occur.</p>
</div></blockquote>
</div></blockquote>
<dl class="class">
<dt id="hydpy.models.dam_v1.Model">
<em class="property">class </em><code class="descclassname">hydpy.models.dam_v1.</code><code class="descname">Model</code><a class="reference internal" href="_modules/hydpy/models/dam_v1.html#Model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hydpy.models.dam_v1.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="modeltools.html#hydpy.core.modeltools.ModelELS" title="hydpy.core.modeltools.ModelELS"><code class="xref py py-class docutils literal"><span class="pre">hydpy.core.modeltools.ModelELS</span></code></a></p>
<p>Version 1 of HydPy-Dam.</p>
<dl class="docutils">
<dt>The following “inlet update methods” are called in the given sequence immediately  before solving the differential equations of the respective model:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.pic_inflow_v1" title="hydpy.models.dam.dam_model.pic_inflow_v1"><code class="xref py py-func docutils literal"><span class="pre">pic_inflow_v1()</span></code></a> <cite>Update the inlet link sequence.</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.calc_naturalremotedischarge_v1" title="hydpy.models.dam.dam_model.calc_naturalremotedischarge_v1"><code class="xref py py-func docutils literal"><span class="pre">calc_naturalremotedischarge_v1()</span></code></a> <cite>Try to estimate the natural discharge of a cross section far downstream based on the last few simulation steps.</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.calc_remotedemand_v1" title="hydpy.models.dam.dam_model.calc_remotedemand_v1"><code class="xref py py-func docutils literal"><span class="pre">calc_remotedemand_v1()</span></code></a> <cite>Estimate the discharge demand of a cross section far downstream.</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.calc_remotefailure_v1" title="hydpy.models.dam.dam_model.calc_remotefailure_v1"><code class="xref py py-func docutils literal"><span class="pre">calc_remotefailure_v1()</span></code></a> <cite>Estimate the shortfall of actual discharge under the required discharge of a cross section far downstream.</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.calc_requiredremoterelease_v1" title="hydpy.models.dam.dam_model.calc_requiredremoterelease_v1"><code class="xref py py-func docutils literal"><span class="pre">calc_requiredremoterelease_v1()</span></code></a> <cite>Guess the required release necessary to not fall below the threshold value at a cross section far downstream with a certain level of certainty.</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.calc_requiredrelease_v1" title="hydpy.models.dam.dam_model.calc_requiredrelease_v1"><code class="xref py py-func docutils literal"><span class="pre">calc_requiredrelease_v1()</span></code></a> <cite>Calculate the total water release required for reducing drought events.</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.calc_targetedrelease_v1" title="hydpy.models.dam.dam_model.calc_targetedrelease_v1"><code class="xref py py-func docutils literal"><span class="pre">calc_targetedrelease_v1()</span></code></a> <cite>Calculate the targeted water release for reducing drought events, taking into account both the required water release and the actual inflow into the dam.</cite></li>
</ul>
</dd>
<dt>The following “outlet update methods” are called in the given sequence immediately  after solving the differential equations of the respective model:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.pass_outflow_v1" title="hydpy.models.dam.dam_model.pass_outflow_v1"><code class="xref py py-func docutils literal"><span class="pre">pass_outflow_v1()</span></code></a> <cite>Update the outlet link sequence.</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.update_loggedoutflow_v1" title="hydpy.models.dam.dam_model.update_loggedoutflow_v1"><code class="xref py py-func docutils literal"><span class="pre">update_loggedoutflow_v1()</span></code></a> <cite>Log a new entry of discharge at a cross section far downstream.</cite></li>
</ul>
</dd>
<dt>The following “receiver update methods” are called in the given sequence before solving the differential equations of any model:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.pic_totalremotedischarge_v1" title="hydpy.models.dam.dam_model.pic_totalremotedischarge_v1"><code class="xref py py-func docutils literal"><span class="pre">pic_totalremotedischarge_v1()</span></code></a> <cite>Update the receiver link sequence.</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.update_loggedtotalremotedischarge_v1" title="hydpy.models.dam.dam_model.update_loggedtotalremotedischarge_v1"><code class="xref py py-func docutils literal"><span class="pre">update_loggedtotalremotedischarge_v1()</span></code></a> <cite>Log a new entry of discharge at a cross section far downstream.</cite></li>
</ul>
</dd>
<dt>The following methods define the relevant components of a system of ODE equations (e.g. direct runoff):</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.pic_inflow_v1" title="hydpy.models.dam.dam_model.pic_inflow_v1"><code class="xref py py-func docutils literal"><span class="pre">pic_inflow_v1()</span></code></a> <cite>Update the inlet link sequence.</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.calc_waterlevel_v1" title="hydpy.models.dam.dam_model.calc_waterlevel_v1"><code class="xref py py-func docutils literal"><span class="pre">calc_waterlevel_v1()</span></code></a> <cite>Determine the water level based on an artificial neural network describing the relationship between water level and water stage.</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.calc_actualrelease_v1" title="hydpy.models.dam.dam_model.calc_actualrelease_v1"><code class="xref py py-func docutils literal"><span class="pre">calc_actualrelease_v1()</span></code></a> <cite>Calculate the actual water release that can be supplied by the dam considering the targeted release and the given water level.</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.calc_flooddischarge_v1" title="hydpy.models.dam.dam_model.calc_flooddischarge_v1"><code class="xref py py-func docutils literal"><span class="pre">calc_flooddischarge_v1()</span></code></a> <cite>Calculate the discharge during and after a flood event based on an artificial neural network describing the relationship between discharge and water stage.</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.calc_outflow_v1" title="hydpy.models.dam.dam_model.calc_outflow_v1"><code class="xref py py-func docutils literal"><span class="pre">calc_outflow_v1()</span></code></a> <cite>Calculate the total outflow of the dam.</cite></li>
</ul>
</dd>
<dt>The following methods define the complete equations of an ODE system (e.g. change in storage of <cite>fast water</cite> due to  effective precipitation and direct runoff):</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_model.update_watervolume_v1" title="hydpy.models.dam.dam_model.update_watervolume_v1"><code class="xref py py-func docutils literal"><span class="pre">update_watervolume_v1()</span></code></a> <cite>Update the actual water volume.</cite></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="hydpy.models.dam_v1.ControlParameters">
<em class="property">class </em><code class="descclassname">hydpy.models.dam_v1.</code><code class="descname">ControlParameters</code><span class="sig-paren">(</span><em>pars</em>, <em>cls_fastaccess=None</em>, <em>cymodel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/models/dam_v1.html#ControlParameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hydpy.models.dam_v1.ControlParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.SubParameters" title="hydpy.core.parametertools.SubParameters"><code class="xref py py-class docutils literal"><span class="pre">hydpy.core.parametertools.SubParameters</span></code></a></p>
<p>Control parameters of HydPy-Dam, Version 1.</p>
<dl class="docutils">
<dt>The following parameter classes are selected:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_control.CatchmentArea" title="hydpy.models.dam.dam_control.CatchmentArea"><code class="xref py py-class docutils literal"><span class="pre">CatchmentArea</span></code></a> <cite>Size of the catchment draining into the dam [km2].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_control.NmbLogEntries" title="hydpy.models.dam.dam_control.NmbLogEntries"><code class="xref py py-class docutils literal"><span class="pre">NmbLogEntries</span></code></a> <cite>Number of log entries for certain variables [m3/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_control.RemoteDischargeMinimum" title="hydpy.models.dam.dam_control.RemoteDischargeMinimum"><code class="xref py py-class docutils literal"><span class="pre">RemoteDischargeMinimum</span></code></a> <cite>Discharge threshold of a cross section far downstream that should not be undercut by the actual discharge [m3/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_control.RemoteDischargeSavety" title="hydpy.models.dam.dam_control.RemoteDischargeSavety"><code class="xref py py-class docutils literal"><span class="pre">RemoteDischargeSavety</span></code></a> <cite>Safety factor to reduce the risk to release not enough water [m3/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_control.NearDischargeMinimumThreshold" title="hydpy.models.dam.dam_control.NearDischargeMinimumThreshold"><code class="xref py py-class docutils literal"><span class="pre">NearDischargeMinimumThreshold</span></code></a> <cite>Discharge threshold of a cross section in the near of the dam that not be undercut by the actual discharge [m3/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_control.NearDischargeMinimumTolerance" title="hydpy.models.dam.dam_control.NearDischargeMinimumTolerance"><code class="xref py py-class docutils literal"><span class="pre">NearDischargeMinimumTolerance</span></code></a> <cite>A tolerance value for the “near discharge minimum” [m3/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_control.WaterLevelMinimumThreshold" title="hydpy.models.dam.dam_control.WaterLevelMinimumThreshold"><code class="xref py py-class docutils literal"><span class="pre">WaterLevelMinimumThreshold</span></code></a> <cite>The minimum operating water level of the dam [m].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_control.WaterLevelMinimumTolerance" title="hydpy.models.dam.dam_control.WaterLevelMinimumTolerance"><code class="xref py py-class docutils literal"><span class="pre">WaterLevelMinimumTolerance</span></code></a> <cite>A tolarance value for the minimum operating water level [m].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_control.WaterVolume2WaterLevel" title="hydpy.models.dam.dam_control.WaterVolume2WaterLevel"><code class="xref py py-class docutils literal"><span class="pre">WaterVolume2WaterLevel</span></code></a> <cite>Artificial neural network describing the relationship between water level and water volume [-].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_control.WaterLevel2FloodDischarge" title="hydpy.models.dam.dam_control.WaterLevel2FloodDischarge"><code class="xref py py-class docutils literal"><span class="pre">WaterLevel2FloodDischarge</span></code></a> <cite>Artificial neural network describing the relationship between flood discharge and water volume [-].</cite></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="hydpy.models.dam_v1.DerivedParameters">
<em class="property">class </em><code class="descclassname">hydpy.models.dam_v1.</code><code class="descname">DerivedParameters</code><span class="sig-paren">(</span><em>pars</em>, <em>cls_fastaccess=None</em>, <em>cymodel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/models/dam_v1.html#DerivedParameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hydpy.models.dam_v1.DerivedParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.SubParameters" title="hydpy.core.parametertools.SubParameters"><code class="xref py py-class docutils literal"><span class="pre">hydpy.core.parametertools.SubParameters</span></code></a></p>
<p>Derived parameters of HydPy-Dam, Version 1.</p>
<dl class="docutils">
<dt>The following parameter classes are selected:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_derived.TOY" title="hydpy.models.dam.dam_derived.TOY"><code class="xref py py-class docutils literal"><span class="pre">TOY</span></code></a> <cite>References the “global” time of the year index array [-].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_derived.Seconds" title="hydpy.models.dam.dam_derived.Seconds"><code class="xref py py-class docutils literal"><span class="pre">Seconds</span></code></a> <cite>Length of the actual simulation step size in seconds [s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_derived.RemoteDischargeSmoothPar" title="hydpy.models.dam.dam_derived.RemoteDischargeSmoothPar"><code class="xref py py-class docutils literal"><span class="pre">RemoteDischargeSmoothPar</span></code></a> <cite>Smoothing parameter to be derived from :class:`~hydpy.models.dam.dam_control.RemoteDischargeSavety</cite> [m3/s].`</li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_derived.NearDischargeMinimumSmoothPar1" title="hydpy.models.dam.dam_derived.NearDischargeMinimumSmoothPar1"><code class="xref py py-class docutils literal"><span class="pre">NearDischargeMinimumSmoothPar1</span></code></a> <cite>Smoothing parameter to be derived from :class:`~hydpy.models.dam.dam_control.NearDischargeMinimumThreshold</cite> for smoothing kernel <code class="xref py py-func docutils literal"><span class="pre">smooth_logistic1()</span></code> [m3/s].`</li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_derived.NearDischargeMinimumSmoothPar2" title="hydpy.models.dam.dam_derived.NearDischargeMinimumSmoothPar2"><code class="xref py py-class docutils literal"><span class="pre">NearDischargeMinimumSmoothPar2</span></code></a> <cite>Smoothing parameter to be derived from :class:`~hydpy.models.dam.dam_control.NearDischargeMinimumThreshold</cite> for smoothing kernel <code class="xref py py-func docutils literal"><span class="pre">smooth_logistic2()</span></code> [m3/s].`</li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_derived.WaterLevelMinimumSmoothPar" title="hydpy.models.dam.dam_derived.WaterLevelMinimumSmoothPar"><code class="xref py py-class docutils literal"><span class="pre">WaterLevelMinimumSmoothPar</span></code></a> <cite>Smoothing parameter to be derived from :class:`~hydpy.models.dam.dam_control.WaterLevelMinimumTolerance</cite> [m].`</li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="hydpy.models.dam_v1.SolverParameters">
<em class="property">class </em><code class="descclassname">hydpy.models.dam_v1.</code><code class="descname">SolverParameters</code><span class="sig-paren">(</span><em>pars</em>, <em>cls_fastaccess=None</em>, <em>cymodel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/models/dam_v1.html#SolverParameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hydpy.models.dam_v1.SolverParameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="parametertools.html#hydpy.core.parametertools.SubParameters" title="hydpy.core.parametertools.SubParameters"><code class="xref py py-class docutils literal"><span class="pre">hydpy.core.parametertools.SubParameters</span></code></a></p>
<p>Solver parameters of HydPy-Dam, Version 1.</p>
<dl class="docutils">
<dt>The following parameter classes are selected:</dt>
<dd><ul class="first last simple">
<li><code class="xref py py-class docutils literal"><span class="pre">AbsErrorMax</span></code> <cite>Absolute numerical error tolerance [m3/s].</cite></li>
<li><code class="xref py py-class docutils literal"><span class="pre">RelDTMin</span></code> <cite>Smallest relative integration time step size allowed [-].</cite></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="hydpy.models.dam_v1.FluxSequences">
<em class="property">class </em><code class="descclassname">hydpy.models.dam_v1.</code><code class="descname">FluxSequences</code><span class="sig-paren">(</span><em>seqs</em>, <em>cls_fastaccess=None</em>, <em>cymodel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/models/dam_v1.html#FluxSequences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hydpy.models.dam_v1.FluxSequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.FluxSequences" title="hydpy.core.sequencetools.FluxSequences"><code class="xref py py-class docutils literal"><span class="pre">hydpy.core.sequencetools.FluxSequences</span></code></a></p>
<p>Flux sequences of HydPy-Dam, Version 1.</p>
<dl class="docutils">
<dt>The following sequence classes are selected:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_fluxes.Inflow" title="hydpy.models.dam.dam_fluxes.Inflow"><code class="xref py py-class docutils literal"><span class="pre">Inflow</span></code></a> <cite>Total inflow [m³/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_fluxes.TotalRemoteDischarge" title="hydpy.models.dam.dam_fluxes.TotalRemoteDischarge"><code class="xref py py-class docutils literal"><span class="pre">TotalRemoteDischarge</span></code></a> <cite>Total discharge at a cross section far downstream [m³/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_fluxes.NaturalRemoteDischarge" title="hydpy.models.dam.dam_fluxes.NaturalRemoteDischarge"><code class="xref py py-class docutils literal"><span class="pre">NaturalRemoteDischarge</span></code></a> <cite>Natural discharge at a cross section far downstream [m³/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_fluxes.RemoteDemand" title="hydpy.models.dam.dam_fluxes.RemoteDemand"><code class="xref py py-class docutils literal"><span class="pre">RemoteDemand</span></code></a> <cite>Discharge demand at a cross section far downstream [m³/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_fluxes.RemoteFailure" title="hydpy.models.dam.dam_fluxes.RemoteFailure"><code class="xref py py-class docutils literal"><span class="pre">RemoteFailure</span></code></a> <cite>Difference between the the actual and the required discharge at a cross section far downstream [m³/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_fluxes.RequiredRemoteRelease" title="hydpy.models.dam.dam_fluxes.RequiredRemoteRelease"><code class="xref py py-class docutils literal"><span class="pre">RequiredRemoteRelease</span></code></a> <cite>Water release considered appropriate to reduce drought events at cross sections far downstream to the desired degree [m³/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_fluxes.RequiredRelease" title="hydpy.models.dam.dam_fluxes.RequiredRelease"><code class="xref py py-class docutils literal"><span class="pre">RequiredRelease</span></code></a> <cite>Required water release for reducing drought events downstream [m³/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_fluxes.TargetedRelease" title="hydpy.models.dam.dam_fluxes.TargetedRelease"><code class="xref py py-class docutils literal"><span class="pre">TargetedRelease</span></code></a> <cite>The targeted water release for reducing drought events downstream after taking both the required release and additional low flow regulations into account [m³/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_fluxes.ActualRelease" title="hydpy.models.dam.dam_fluxes.ActualRelease"><code class="xref py py-class docutils literal"><span class="pre">ActualRelease</span></code></a> <cite>Actual water release thought for reducing with drought events downstream [m³/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_fluxes.FloodDischarge" title="hydpy.models.dam.dam_fluxes.FloodDischarge"><code class="xref py py-class docutils literal"><span class="pre">FloodDischarge</span></code></a> <cite>Water release associated with flood events [m³/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_fluxes.Outflow" title="hydpy.models.dam.dam_fluxes.Outflow"><code class="xref py py-class docutils literal"><span class="pre">Outflow</span></code></a> <cite>Total outflow [m³/s].</cite></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="hydpy.models.dam_v1.StateSequences">
<em class="property">class </em><code class="descclassname">hydpy.models.dam_v1.</code><code class="descname">StateSequences</code><span class="sig-paren">(</span><em>seqs</em>, <em>cls_fastaccess=None</em>, <em>cymodel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/models/dam_v1.html#StateSequences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hydpy.models.dam_v1.StateSequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.StateSequences" title="hydpy.core.sequencetools.StateSequences"><code class="xref py py-class docutils literal"><span class="pre">hydpy.core.sequencetools.StateSequences</span></code></a></p>
<p>State sequences of HydPy-Dam, Version 1.</p>
<dl class="docutils">
<dt>The following sequence classes are selected:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_states.WaterVolume" title="hydpy.models.dam.dam_states.WaterVolume"><code class="xref py py-class docutils literal"><span class="pre">WaterVolume</span></code></a> <cite>Water volume [million m³].</cite></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="hydpy.models.dam_v1.LogSequences">
<em class="property">class </em><code class="descclassname">hydpy.models.dam_v1.</code><code class="descname">LogSequences</code><span class="sig-paren">(</span><em>seqs</em>, <em>cls_fastaccess=None</em>, <em>cymodel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/models/dam_v1.html#LogSequences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hydpy.models.dam_v1.LogSequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.LogSequences" title="hydpy.core.sequencetools.LogSequences"><code class="xref py py-class docutils literal"><span class="pre">hydpy.core.sequencetools.LogSequences</span></code></a></p>
<p>Log sequences of HydPy-Dam, Version 1.</p>
<dl class="docutils">
<dt>The following sequence classes are selected:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_logs.LoggedTotalRemoteDischarge" title="hydpy.models.dam.dam_logs.LoggedTotalRemoteDischarge"><code class="xref py py-class docutils literal"><span class="pre">LoggedTotalRemoteDischarge</span></code></a> <cite>Discharge values received from cross sections far downstream [m3/s].</cite></li>
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_logs.LoggedOutflow" title="hydpy.models.dam.dam_logs.LoggedOutflow"><code class="xref py py-class docutils literal"><span class="pre">LoggedOutflow</span></code></a> <cite>Discharge values received from cross sections far downstream [m3/s].</cite></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="hydpy.models.dam_v1.AideSequences">
<em class="property">class </em><code class="descclassname">hydpy.models.dam_v1.</code><code class="descname">AideSequences</code><span class="sig-paren">(</span><em>seqs</em>, <em>cls_fastaccess=None</em>, <em>cymodel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/models/dam_v1.html#AideSequences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hydpy.models.dam_v1.AideSequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.AideSequences" title="hydpy.core.sequencetools.AideSequences"><code class="xref py py-class docutils literal"><span class="pre">hydpy.core.sequencetools.AideSequences</span></code></a></p>
<p>State sequences of HydPy-Dam, Version 1.</p>
<dl class="docutils">
<dt>The following sequence classes are selected:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_aides.WaterLevel" title="hydpy.models.dam.dam_aides.WaterLevel"><code class="xref py py-class docutils literal"><span class="pre">WaterLevel</span></code></a> <cite>Water level [m].</cite></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="hydpy.models.dam_v1.InletSequences">
<em class="property">class </em><code class="descclassname">hydpy.models.dam_v1.</code><code class="descname">InletSequences</code><span class="sig-paren">(</span><em>seqs</em>, <em>cls_fastaccess=None</em>, <em>cymodel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/models/dam_v1.html#InletSequences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hydpy.models.dam_v1.InletSequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.LinkSequences" title="hydpy.core.sequencetools.LinkSequences"><code class="xref py py-class docutils literal"><span class="pre">hydpy.core.sequencetools.LinkSequences</span></code></a></p>
<p>Upstream link sequences of HydPy-Dam, Version 1.</p>
<dl class="docutils">
<dt>The following sequence classes are selected:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_inlets.Q" title="hydpy.models.dam.dam_inlets.Q"><code class="xref py py-class docutils literal"><span class="pre">Q</span></code></a> <cite>Discharge [m³/s].</cite></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="hydpy.models.dam_v1.OutletSequences">
<em class="property">class </em><code class="descclassname">hydpy.models.dam_v1.</code><code class="descname">OutletSequences</code><span class="sig-paren">(</span><em>seqs</em>, <em>cls_fastaccess=None</em>, <em>cymodel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/models/dam_v1.html#OutletSequences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hydpy.models.dam_v1.OutletSequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.LinkSequences" title="hydpy.core.sequencetools.LinkSequences"><code class="xref py py-class docutils literal"><span class="pre">hydpy.core.sequencetools.LinkSequences</span></code></a></p>
<p>Downstream link sequences of HydPy-Dam, Version 1.</p>
<dl class="docutils">
<dt>The following sequence classes are selected:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_outlets.Q" title="hydpy.models.dam.dam_outlets.Q"><code class="xref py py-class docutils literal"><span class="pre">Q</span></code></a> <cite>Discharge [m³/s].</cite></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="hydpy.models.dam_v1.ReceiverSequences">
<em class="property">class </em><code class="descclassname">hydpy.models.dam_v1.</code><code class="descname">ReceiverSequences</code><span class="sig-paren">(</span><em>seqs</em>, <em>cls_fastaccess=None</em>, <em>cymodel=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hydpy/models/dam_v1.html#ReceiverSequences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#hydpy.models.dam_v1.ReceiverSequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="sequencetools.html#hydpy.core.sequencetools.LinkSequences" title="hydpy.core.sequencetools.LinkSequences"><code class="xref py py-class docutils literal"><span class="pre">hydpy.core.sequencetools.LinkSequences</span></code></a></p>
<p>Information link sequences of HydPy-Dam, Version 1.</p>
<dl class="docutils">
<dt>The following sequence classes are selected:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="dam.html#hydpy.models.dam.dam_receivers.Q" title="hydpy.models.dam.dam_receivers.Q"><code class="xref py py-class docutils literal"><span class="pre">Q</span></code></a> <cite>Discharge at a crosssection far downstream [m³/s].</cite></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="dam.html"
                        title="previous chapter">dam</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="HydPy-H.html"
                        title="next chapter">HydPy-H (HBV)</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/dam_v1.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="HydPy-H.html" title="HydPy-H (HBV)"
             >next</a> |</li>
        <li class="right" >
          <a href="dam.html" title="dam"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">HydPy 2.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modelcollection.html" >Model Collection</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="HydPy-D.html" >HydPy-D</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Christoph Tyralla.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.
    </div>
  </body>
</html>